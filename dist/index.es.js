import{jsxs as e,jsx as n,Fragment as r}from"react/jsx-runtime";import{useState as t,useRef as o,useCallback as a,useEffect as l,useMemo as i,createContext as s,forwardRef as d,useContext as c,useLayoutEffect as u,createElement as f,createRef as h,memo as v,useReducer as g}from"react";var m=function(){return m=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},m.apply(this,arguments)};function p(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]])}return r}function w(e,n,r){if(r||2===arguments.length)for(var t,o=0,a=n.length;o<a;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))}"function"==typeof SuppressedError&&SuppressedError;var R,C=function(r){var t=r.currentPage,o=r.hideFooter,a=r.nextIcon,l=r.onPageChange,i=r.prevIcon,s=r.rowsPerPage,d=r.shouldPaginate,c=r.totalRows,u=Math.ceil(c/s),f=t>1,h=t<u,v=function(e){e>=1&&e<=u&&l(e)};return o||!d?null:e("div",m({className:"st-footer"},{children:[n("button",m({className:"st-next-prev-btn ".concat(f?"":"disabled"),onClick:function(){return v(t-1)},disabled:!f},{children:i})),n("button",m({className:"st-next-prev-btn ".concat(h?"":"disabled"),onClick:function(){return v(t+1)},disabled:!h},{children:a})),Array.from({length:u},(function(e,r){return n("button",m({onClick:function(){return v(r+1)},className:"st-page-btn ".concat(t===r+1?"active":"")},{children:r+1}),r)}))]}))},b=function(e){var r=e.className;return n("svg",m({className:r,viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},{children:n("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}))},x=function(e){var r=e.className;return n("svg",m({className:r,viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},{children:n("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})}))},y=s({rows:[],tableRows:[]}),I=function(e){var r=e.className;return n("svg",m({className:r,viewBox:"0 0 20 20",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},{children:n("path",{d:"M5.41 11.41L10 6.83l4.59 4.58L16 10l-6-6-6 6z"})}))},E=function(e){var r=e.className;return n("svg",m({className:r,viewBox:"0 0 20 20",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},{children:n("path",{d:"M5.41 7.59L10 12.17l4.59-4.58L16 9l-6 6-6-6z"})}))},D=function(r){var o=r.checked,a=void 0!==o&&o,l=r.children,i=r.onChange,s=t(a),d=s[0],c=s[1];return e("label",m({className:"st-checkbox-label"},{children:[n("input",{checked:d,className:"st-checkbox-input",onChange:function(){var e=!d;c(e),i&&i(e)},type:"checkbox"}),n("span",m({className:"st-checkbox-custom ".concat(d?"st-checked":"")},{children:d&&n("span",{className:"st-checkbox-checkmark"})})),l]}))},H=function(e){var r=e.headers,t=e.open,o=e.position;e.setOpen;var a=e.setHiddenColumns,l=e.hiddenColumns,i="left"===o?"left":"";return n("div",m({className:"st-column-editor-popout ".concat(t?"open":""," ").concat(i),onClick:function(e){return e.stopPropagation()}},{children:n("div",m({className:"st-column-editor-popout-content"},{children:r.map((function(e,r){return n(D,m({checked:l[e.accessor],onChange:function(n){var r;return a(m(m({},l),((r={})[e.accessor]=n,r)))}},{children:e.label}),r)}))}))}))},N=function(r){var o=r.columnEditorText,a=r.editColumns,l=r.editColumnsInitOpen,i=r.headers,s=r.position,d=void 0===s?"right":s,c=r.setHiddenColumns,u=r.hiddenColumns,f=t(l),h=f[0],v=f[1];return a?e("div",m({className:"st-column-editor ".concat(h?"open":""," ").concat(d),onClick:function(){return function(e){v(e)}(!h)}},{children:[n("div",m({className:"st-column-editor-text"},{children:o})),n(H,{headers:i,open:h,position:d,setOpen:v,setHiddenColumns:c,hiddenColumns:u})]})):null},S=function(e){var n=e.accessor,r=e.rowIndex;return"cell-".concat(n,"-").concat(r)},k=function(e){var n=e.hiddenColumns,r=e.header,t=e.pinned;return n[r.accessor]?null:!t&&!r.pinned||r.pinned===t||null},L=function(r){var t=r.value,o=r.onBlur,a=r.onChange;return e("select",m({value:t.toString(),onBlur:o,onChange:function(e){var n=e.target.value;a("true"===n)}},{children:[n("option",m({value:"true"},{children:"True"})),n("option",m({value:"false"},{children:"False"}))]}))},M=function(e){var r=e.defaultValue,t=e.onBlur,a=e.onChange,l=o(null);return n("input",{className:"editable-cell-input",ref:l,autoFocus:!0,type:"text",defaultValue:null!=r?r:"",onBlur:t,onChange:function(e){var n=e.target.value;a(n)}})},T=function(e){var r=e.defaultValue,t=e.onBlur,a=e.onChange,l=o(null);return n("input",{className:"editable-cell-input",ref:l,autoFocus:!0,defaultValue:r.toString(),onBlur:t,onChange:function(e){var n=e.target.value;/^\d*\.?\d*$/.test(n)&&a(n)}})},B=function(e){var t=e.onChange,o=e.setIsEditing,a=e.value,l=function(e){null==t||t(e)},i=function(){o(!1)};return n(r,{children:"string"==typeof a||null==a?n(M,{defaultValue:a,onBlur:i,onChange:l}):"boolean"==typeof a?n(L,{onBlur:i,onChange:l,value:a}):"number"==typeof a?n(T,{defaultValue:a,onBlur:i,onChange:l}):null})},O=0,A=function(){return function(e){var n=e.callback,r=e.callbackProps,t=e.limit,o=Date.now();(0===O||o-O>=t)&&(O=o,n(r))}},P=Date.now(),W={screenX:0,screenY:0},z=function(e){var n,r,t=e.draggedHeaderRef,a=e.headersRef,i=e.hoveredHeaderRef,s=e.onTableHeaderDragEnd,d=(n=a.current,r=o(n),l((function(){r.current=n}),[n]),r.current);return{handleDragStart:function(e){t.current=e,P=Date.now()},handleDragOver:function(e){var n,r=e.event,o=e.hoveredHeader;if(r.preventDefault(),a.current){var l=r.currentTarget.getAnimations().some((function(e){return"running"===e.playState})),c=r.screenX,u=r.screenY,f=Math.sqrt(Math.pow(c-W.screenX,2)+Math.pow(u-W.screenY,2));i.current=o;var h=w([],a.current,!0),v=h.findIndex((function(e){var n;return e.accessor===(null===(n=t.current)||void 0===n?void 0:n.accessor)})),g=h.findIndex((function(e){return e.accessor===o.accessor})),m=h.splice(v,1)[0];if(h.splice(g,0,m),!(l||o.accessor===(null===(n=t.current)||void 0===n?void 0:n.accessor)||null===t.current||f<10||void 0===v||void 0===g||JSON.stringify(h)===JSON.stringify(a.current))){var p=Date.now();JSON.stringify(h)===JSON.stringify(d)&&p-P<800&&f<50||(P=p,W={screenX:c,screenY:u},s(h))}}},handleDragEnd:function(){t.current=null,i.current=null}}},U=d((function(r,o){var a=r.borderClass,i=r.cellHasChildren,s=r.colIndex,d=r.content,u=r.depth,f=r.draggedHeaderRef,h=r.header,v=r.headersRef,g=r.hoveredHeaderRef,p=r.isRowExpanded,w=r.isSelected,R=r.isTopLeftCell,C=r.onCellChange,b=r.onExpandRowClick,I=r.onMouseDown,D=r.onMouseOver,H=r.onTableHeaderDragEnd,N=r.row,k=r.rowIndex,L=c(y);L.rows,L.tableRows;var M=t(d),T=M[0],O=M[1],P=t(!1),W=P[0],U=P[1],j=z({draggedHeaderRef:f,headersRef:v,hoveredHeaderRef:g,onTableHeaderDragEnd:H}).handleDragOver,F=A(),G=Boolean(null==h?void 0:h.isEditable),V=k%2==0,J="st-cell ".concat(u>0&&h.expandable?"st-cell-depth-".concat(u):""," ").concat(w?R?"st-cell-selected-first-cell ".concat(a):"st-cell-selected ".concat(a):""," ").concat(V?"st-cell-odd-row":"st-cell-even-row"," ").concat(G?"clickable":""," ").concat("right"===h.align?"right-aligned":"");l((function(){"object"!=typeof d&&O(d)}),[d]);return W?n("div",m({className:"st-cell-editing ".concat(V?"st-cell-odd-row":"st-cell-even-row"),id:S({accessor:h.accessor,rowIndex:k+1})},{children:n(B,{onChange:function(e){var n;O(e),null==C||C({accessor:h.accessor,newValue:e,newRowIndex:k,originalRowIndex:null===(n=N.rowMeta)||void 0===n?void 0:n.rowId,row:N})},setIsEditing:U,value:T})})):e("div",m({className:J,id:S({accessor:h.accessor,rowIndex:k+1}),onDoubleClick:function(){return h.isEditable&&U(!0)},onMouseDown:function(){return I(k,s)},onMouseOver:function(){return D(k,s)},onDragOver:function(e){return F({callback:j,callbackProps:{event:e,hoveredHeader:h},limit:50})},ref:o},{children:[h.expandable&&i?p(N.rowMeta.rowId)?n("div",m({className:"st-sort-icon-container",onClick:function(){return b(N.rowMeta.rowId)}},{children:n(E,{className:"st-sort-icon"})})):n("div",m({className:"st-sort-icon-container",onClick:function(){return b(N.rowMeta.rowId)}},{children:n(x,{className:"st-sort-icon"})})):null,n("span",{children:T})]}))})),j=d((function(e,r){return e.visible?n("div",{className:"st-cell",ref:r}):n("div",{ref:r})})),F=function(e){var r=e.lastGroupRow;return n("div",{className:"st-row-separator ".concat(r?"st-last-group-row":"")})},G=function(e){var t=e.allowAnimations,o=e.children,a=p(e,["allowAnimations","children"]);return t?n(V,m({},a,{children:o})):n(r,{children:o})},V=function(e){var a=e.allowHorizontalAnimate,i=void 0===a||a,s=e.children,d=e.draggedHeaderRef,c=e.headersRef,f=e.isBody,h=e.mainBodyRef,v=e.pauseAnimation,g=e.rowIndex,m=o(!1),p=t({}),w=p[0],R=p[1],C=o({}),b=c.current;return u((function(){if(b){var e=function(e){var n=e.currentHeaders,r=e.draggedHeaderRef,t=e.rowIndex,o={};return n.forEach((function(e){var n;if(e){var a=document.getElementById(S({accessor:e.accessor,rowIndex:t}));if(a){var l=a.getAnimations().some((function(e){return"running"===e.playState})),i=a.getBoundingClientRect();l&&(null===(n=null==r?void 0:r.current)||void 0===n?void 0:n.accessor)!==e.accessor?o[e.accessor]=!1:o[e.accessor]=i}}})),o}({currentHeaders:b,draggedHeaderRef:d,rowIndex:g});JSON.stringify(e)!==JSON.stringify(w)&&(C.current=w,R(e))}}),[w,b,d,f,g]),u((function(){var e=h.current,n=function(){m.current=!0},r=function(){m.current=!1};return null==e||e.addEventListener("scroll",n),null==e||e.addEventListener("scrollend",r),function(){null==e||e.removeEventListener("scroll",n),null==e||e.removeEventListener("scrollend",r)}}),[d,h]),l((function(){v||m.current||Object.keys(C.current).length&&b&&b.forEach((function(e){var n=document.getElementById(S({accessor:e.accessor,rowIndex:g}));if(n){var r=C.current[e.accessor],t=w[e.accessor];if(r&&t){var o=r.left-t.left,a=i?0:r.top-t.top,l=Math.abs(o),s=Math.abs(a);(l>10||s>10)&&requestAnimationFrame((function(){n.style.transform="translate(".concat(o,"px, ").concat(a,"px)"),n.style.transition="transform 0s",requestAnimationFrame((function(){n.style.transform="",n.style.transition="transform ".concat(400,"ms ease-out")}))}))}}}))}),[i,w,b,f,v,C,g]),n(r,{children:s})},J=function(r){var t,o=r.getBorderClass,a=r.handleMouseDown,l=r.handleMouseOver,i=r.headers,s=r.hiddenColumns,d=r.isRowExpanded,c=r.isSelected,u=r.isTopLeftCell,v=r.lastGroupRow,g=r.onExpandRowClick,w=r.pinned,R=r.row,C=r.rowIndex,b=r.shouldDisplayLastColumnCell,x=p(r,["getBorderClass","handleMouseDown","handleMouseOver","headers","hiddenColumns","isRowExpanded","isSelected","isTopLeftCell","lastGroupRow","onExpandRowClick","pinned","row","rowIndex","shouldDisplayLastColumnCell"]),y=null===(t=R.rowMeta)||void 0===t?void 0:t.children;return e(G,m({allowAnimations:x.allowAnimations,allowHorizontalAnimate:x.shouldPaginate,draggedHeaderRef:x.draggedHeaderRef,headersRef:x.headersRef,isBody:!0,mainBodyRef:x.mainBodyRef,pauseAnimation:x.isWidthDragging,rowIndex:C+1},{children:[0!==C&&n(F,{lastGroupRow:v}),i.map((function(e,n){if(!k({hiddenColumns:s,header:e,pinned:w}))return null;var r=R.rowData[e.accessor];return e.cellRenderer&&(r=e.cellRenderer(R)),f(U,m({},x,{borderClass:o(C,n),cellHasChildren:((null==y?void 0:y.length)||0)>0,colIndex:n,content:r,header:e,isRowExpanded:d,isSelected:c(C,n),isTopLeftCell:u(C,n),key:n,onExpandRowClick:g,onMouseDown:function(){return a({rowIndex:C,colIndex:n})},onMouseOver:function(){return l(C,n)},row:R,rowIndex:C}))})),n(j,{ref:h(),visible:b})]}))},X=function(t){var o,a,l,i=t.depth,s=void 0===i?0:i,d=t.getNextRowIndex,c=t.index,u=t.lastGroupRow,h=t.pinned,v=t.props,g=t.row,p=((null===(a=null===(o=g.rowMeta)||void 0===o?void 0:o.children)||void 0===a?void 0:a.length)||0)>0,w=d(),R=(null===(l=g.rowMeta)||void 0===l?void 0:l.children)||[];return e(r,{children:[f(J,m({},v,{depth:s,lastGroupRow:u,key:c,pinned:h,row:g,rowIndex:w})),p&&v.isRowExpanded(g.rowMeta.rowId)&&R.map((function(e,r){return n(X,{depth:s+1,getNextRowIndex:d,index:r,pinned:h,props:v,row:e},r)}))]})},Y=function(e){e.headerContainerRef;var r=e.isRowExpanded,t=e.onExpandRowClick,a=e.pinned,i=e.rows,s=e.sectionRef,d=e.templateColumns,c=p(e,["headerContainerRef","isRowExpanded","onExpandRowClick","pinned","rows","sectionRef","templateColumns"]),u=a?"st-table-body-pinned-".concat(a):"st-table-body-main",f=o(0);l((function(){f.current=0}));var h=function(){return f.current++};return n("div",m({className:u,ref:s,style:{gridTemplateColumns:d}},{children:i.map((function(e,o){var l,i;return n(X,{getNextRowIndex:h,index:o,lastGroupRow:Boolean(null===(i=null===(l=e.rowMeta)||void 0===l?void 0:l.children)||void 0===i?void 0:i.length),pinned:a,props:m(m({},c),{isRowExpanded:r,onExpandRowClick:t}),row:e},o)}))}))},q=function(r){var o=r.currentRows,a=r.headerContainerRef,i=r.isRowExpanded,s=r.mainBodyRef,d=r.mainTemplateColumns,c=r.onExpandRowClick,u=r.pinnedLeftColumns,f=r.pinnedLeftRef,h=r.pinnedLeftTemplateColumns,v=r.pinnedRightColumns,g=r.pinnedRightRef,p=r.pinnedRightTemplateColumns,w=r.scrollbarHorizontalRef,R=r.scrollbarWidth,C=r.tableBodyContainerRef;return function(e){var n=e.headerContainerRef,r=e.mainSectionRef,o=e.scrollbarHorizontalRef,a=e.scrollbarWidth,i=t(!1),s=i[0],d=i[1];l((function(){var e=null==n?void 0:n.current,r=null==o?void 0:o.current;if(s&&e)return e.classList.add("st-header-scroll-padding"),null==r||r.classList.add("st-header-scroll-padding"),e.style.setProperty("--st-after-width","".concat(a,"px")),null==r||r.style.setProperty("--st-after-width","".concat(a,"px")),function(){e.classList.remove("st-header-scroll-padding"),null==r||r.classList.remove("st-header-scroll-padding")}}),[n,s,o,a]),l((function(){var e=null==n?void 0:n.current,t=null==r?void 0:r.current;if(t&&e){var o=function(){if(t){var e=t.scrollHeight>t.clientHeight;d(e)}};o();var a=new ResizeObserver((function(){o()}));return a.observe(t),function(){t&&a.unobserve(t)}}}),[n,r])}({headerContainerRef:a,mainSectionRef:C,scrollbarHorizontalRef:w,scrollbarWidth:R}),e("div",m({className:"st-table-body-container",ref:C},{children:[u.length>0&&n(Y,m({},r,{rows:o,templateColumns:h,pinned:"left",sectionRef:f,isRowExpanded:i,onExpandRowClick:c})),n(Y,m({},r,{rows:o,templateColumns:d,sectionRef:s,isRowExpanded:i,onExpandRowClick:c})),v.length>0&&n(Y,m({},r,{rows:o,templateColumns:p,pinned:"right",sectionRef:g,isRowExpanded:i,onExpandRowClick:c}))]}))},K=function(e){var n=e.event,r=e.forceUpdate,t=e.header,o=e.headersRef,a=e.index;e.reverse;var l=e.setIsWidthDragging;l(!0),n.preventDefault();var i=n.clientX;if(t){var s=t.width,d=function(e){var n=Math.max(s+(e.clientX-i),40);t&&o.current&&(o.current[a].width=n,r())},c=function(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",c),l(!1)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",c)}},$=d((function(r,o){var a,i=r.columnResizing,s=r.currentRows,d=r.draggable,c=r.draggedHeaderRef,u=r.forceUpdate,f=r.headersRef,h=r.hoveredHeaderRef,v=r.index,g=r.onSort,p=r.onTableHeaderDragEnd,w=r.reverse,R=r.selectableColumns,C=r.setIsWidthDragging,b=r.setSelectedCells,x=r.sort,y=r.sortDownIcon,I=r.sortUpIcon,E=t(!1),D=E[0],H=E[1],N=null===(a=f.current)||void 0===a?void 0:a[v],k=Boolean(null==N?void 0:N.isSortable),L="st-header-cell ".concat(N===h.current?"st-hovered":""," ").concat(D?"st-dragging":""," ").concat(k?"clickable":""," ").concat(d&&!k?"draggable":""," ").concat("right"===(null==N?void 0:N.align)?"right-aligned":""),M=z({draggedHeaderRef:c,headersRef:f,hoveredHeaderRef:h,onTableHeaderDragEnd:p}),T=M.handleDragStart,B=M.handleDragEnd,O=z({draggedHeaderRef:c,headersRef:f,hoveredHeaderRef:h,onTableHeaderDragEnd:p}).handleDragOver,P=A(),W=function(e){var n=e.event,r=e.header;if(R){var t=s.length,o=Array.from({length:t},(function(e,n){return"".concat(n,"-").concat(v)})),a=function(e,n){var r=new Set,o=Math.min(e,n),a=Math.max(e,n);return Array.from({length:t}).forEach((function(e,n){Array.from({length:a-o+1}).forEach((function(e,t){r.add("".concat(n,"-").concat(o+t))}))})),r};n.shiftKey?b((function(e){var n,r=Number(null===(n=Array.from(e)[0])||void 0===n?void 0:n.split("-")[1]),t=Number(o[0].split("-")[1]);return r===t?new Set(o):r>t?a(t,r):a(r,t)})):b(new Set(o))}else r.isSortable&&g(v,r.accessor)};if(l((function(){var e=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"};return document.addEventListener("dragover",e),function(){document.removeEventListener("dragover",e)}}),[]),!N)return null;var U=i&&n("div",{className:"st-header-resize-handle",onMouseDown:function(e){P({callback:K,callbackProps:{event:e,forceUpdate:u,header:N,headersRef:f,index:v,setIsWidthDragging:C},limit:10})}});return e("div",m({className:L,id:S({accessor:N.accessor,rowIndex:0}),onDragOver:function(e){P({callback:O,callbackProps:{event:e,hoveredHeader:N},limit:50})},ref:o,style:{width:N.width}},{children:[w&&U,n("div",m({className:"st-header-label",draggable:d,onClick:function(e){return W({event:e,header:N})},onDragEnd:function(e){e.preventDefault(),H(!1),B()},onDragStart:function(e){d&&N&&function(e){H(!0),T(e)}(N)},onMouseEnter:function(){return document.body.style.overflow="hidden"},onMouseLeave:function(){return document.body.style.overflow="auto"}},{children:null==N?void 0:N.label})),x&&x.key.accessor===N.accessor&&e("div",m({className:"st-sort-icon-container",onClick:function(e){return W({event:e,header:N})}},{children:["ascending"===x.direction&&I&&I,"descending"===x.direction&&y&&y]})),!w&&U]}))})),Q=function(e,n){l((function(){if(e.current){var r=e.current,t=function(){var e,t=null==r?void 0:r.scrollLeft;void 0!==t&&(null===(e=n.current)||void 0===e||e.scrollTo(t,0))};return r.addEventListener("scroll",t),function(){null==r||r.removeEventListener("scroll",t)}}}),[e,n])},Z=function(r){var t,a,l,i=r.allowAnimations,s=r.columnResizing,d=r.currentRows,c=r.draggable,u=r.draggedHeaderRef,f=r.forceUpdate,v=r.headerContainerRef,g=r.headersRef,p=r.hiddenColumns,w=r.hoveredHeaderRef,R=r.isWidthDragging,C=r.mainTemplateColumns,b=r.onSort,x=r.onTableHeaderDragEnd,y=r.pinnedLeftColumns,I=r.pinnedLeftTemplateColumns,E=r.pinnedRightColumns,D=r.pinnedRightTemplateColumns,H=r.selectableColumns,N=r.setIsWidthDragging,S=r.setSelectedCells,L=r.shouldDisplayLastColumnCell,M=r.sort,T=r.sortDownIcon,B=r.sortUpIcon,O=r.mainBodyRef,A=o(null);Q(O,A);return e("div",m({className:"st-header-container",ref:v},{children:[y.length>0&&n("div",m({className:"st-header-pinned-left",style:{gridTemplateColumns:I}},{children:n(G,m({allowAnimations:i,draggedHeaderRef:u,headersRef:g,mainBodyRef:O,pauseAnimation:R,rowIndex:0},{children:null===(t=g.current)||void 0===t?void 0:t.map((function(e,r){return k({hiddenColumns:p,header:e,pinned:"left"})?n($,{columnResizing:s,currentRows:d,draggable:c,draggedHeaderRef:u,forceUpdate:f,headersRef:g,hoveredHeaderRef:w,index:r,onSort:b,onTableHeaderDragEnd:x,ref:h(),selectableColumns:H,setIsWidthDragging:N,setSelectedCells:S,sort:M,sortDownIcon:T,sortUpIcon:B},e.accessor):null}))}))})),n("div",m({className:"st-header-main",onScroll:function(e){var n,r,t=null===(n=A.current)||void 0===n?void 0:n.scrollLeft;void 0!==t&&(null===(r=O.current)||void 0===r||r.scrollTo(t,0))},ref:A,style:{gridTemplateColumns:C}},{children:e(G,m({allowAnimations:i,draggedHeaderRef:u,headersRef:g,mainBodyRef:O,pauseAnimation:R,rowIndex:0},{children:[null===(a=g.current)||void 0===a?void 0:a.map((function(e,r){return k({hiddenColumns:p,header:e})?n($,{columnResizing:s,currentRows:d,draggable:c,draggedHeaderRef:u,forceUpdate:f,headersRef:g,hoveredHeaderRef:w,index:r,onSort:b,onTableHeaderDragEnd:x,ref:h(),selectableColumns:H,setIsWidthDragging:N,setSelectedCells:S,sort:M,sortDownIcon:T,sortUpIcon:B},e.accessor):null})),n(j,{ref:h(),visible:L})]}))})),E.length>0&&n("div",m({className:"st-header-pinned-right",style:{gridTemplateColumns:D}},{children:e(G,m({allowAnimations:i,draggedHeaderRef:u,headersRef:g,mainBodyRef:O,pauseAnimation:R,rowIndex:0},{children:[null===(l=g.current)||void 0===l?void 0:l.map((function(e,r){return k({hiddenColumns:p,header:e,pinned:"right"})?n($,{columnResizing:s,currentRows:d,draggable:c,draggedHeaderRef:u,forceUpdate:f,headersRef:g,hoveredHeaderRef:w,index:r,onSort:b,onTableHeaderDragEnd:x,reverse:!0,ref:h(),selectableColumns:H,setIsWidthDragging:N,setSelectedCells:S,sort:M,sortDownIcon:T,sortUpIcon:B},e.accessor):null})),n(j,{ref:h(),visible:L})]}))}))]}))},_=function(r){var t=r.allowAnimations,a=r.columnResizing,l=r.currentRows,s=r.draggable,d=r.draggedHeaderRef,c=r.editColumns,u=r.forceUpdate,f=r.getBorderClass,h=r.handleMouseDown,v=r.handleMouseOver,g=r.headersRef,p=r.hiddenColumns,w=r.hoveredHeaderRef,R=r.isRowExpanded,C=r.isSelected,b=r.isTopLeftCell,x=r.isWidthDragging,y=r.mainBodyRef,I=r.onCellChange,E=r.onExpandRowClick,D=r.onSort,H=r.onTableHeaderDragEnd,N=r.pinnedLeftRef,S=r.pinnedRightRef,k=r.scrollbarHorizontalRef,L=r.scrollbarWidth,M=r.selectableColumns,T=r.setIsWidthDragging,B=r.setSelectedCells,O=r.shouldPaginate,A=r.sort,P=r.sortDownIcon,W=r.sortUpIcon,z=r.tableBodyContainerRef,U=o(null),j=g.current.filter((function(e){return!e.hide&&!e.pinned})),F=i((function(){return!!y.current&&j.reduce((function(e,n){return e+n.width}),0)<y.current.clientWidth}),[j,y]),G=g.current.filter((function(e){return"left"===e.pinned&&!0!==e.hide})),V=g.current.filter((function(e){return"right"===e.pinned&&!0!==e.hide})),J=i((function(){return"".concat(G.map((function(e){return"".concat(e.width,"px")})).join(" "))}),[G]),X=i((function(){return"".concat(j.filter((function(e){return!0!==p[e.accessor]})).map((function(e){return"".concat(e.width,"px")})).join(" ")," 1fr")}),[j,p]),Y=i((function(){return"".concat(V.map((function(e){return"".concat(e.width,"px")})).join(" "))}),[V]),K={allowAnimations:t,columnResizing:a,currentRows:l,draggable:s,draggedHeaderRef:d,forceUpdate:u,headerContainerRef:U,headersRef:g,hiddenColumns:p,hoveredHeaderRef:w,isWidthDragging:x,mainBodyRef:y,mainTemplateColumns:X,onSort:D,onTableHeaderDragEnd:H,pinnedLeftColumns:G,pinnedLeftTemplateColumns:J,pinnedRightColumns:V,pinnedRightTemplateColumns:Y,selectableColumns:M,setIsWidthDragging:T,setSelectedCells:B,shouldDisplayLastColumnCell:F,sort:A,sortDownIcon:P,sortUpIcon:W,tableBodyContainerRef:z},$={allowAnimations:t,currentRows:l,draggedHeaderRef:d,getBorderClass:f,handleMouseDown:h,handleMouseOver:v,headerContainerRef:U,headers:g.current,headersRef:g,hiddenColumns:p,hoveredHeaderRef:w,isRowExpanded:R,isSelected:C,isTopLeftCell:b,isWidthDragging:x,mainBodyRef:y,mainTemplateColumns:X,onCellChange:I,onExpandRowClick:E,onTableHeaderDragEnd:H,pinnedLeftColumns:G,pinnedLeftRef:N,pinnedLeftTemplateColumns:J,pinnedRightColumns:V,pinnedRightRef:S,pinnedRightTemplateColumns:Y,scrollbarHorizontalRef:k,scrollbarWidth:L,shouldDisplayLastColumnCell:F,shouldPaginate:O,tableBodyContainerRef:z};return e("div",m({className:"st-table-content",style:{width:c?"calc(100% - 27.5px)":"100%"}},{children:[n(Z,m({},K)),n(q,m({},$))]}))},ee=function(e){var n=e.callback,r=e.ref,t=e.widthAttribute;l((function(){var e=r.current;if(e){var o=function(){n(e[t]||0)};o();var a=new ResizeObserver((function(){o()}));return a.observe(e),function(){return a.disconnect()}}}),[n,r,t])},ne=function(r){r.headersRef;var a=r.mainBodyRef,l=r.pinnedLeftRef,i=r.pinnedRightRef,s=r.scrollbarHorizontalRef,d=r.tableContentWidth,c=t(0),u=c[0],f=c[1],h=t(0),v=h[0],g=h[1],p=t(0),w=p[0],R=p[1],C=o(null);return ee({widthAttribute:"offsetWidth",callback:f,ref:l}),ee({widthAttribute:"scrollWidth",callback:R,ref:a}),ee({widthAttribute:"offsetWidth",callback:g,ref:i}),Q(a,C),!a.current||a.current.scrollWidth<=a.current.clientWidth?null:n("div",m({className:"st-horizontal-scrollbar-container",ref:s},{children:e("div",m({style:{width:d}},{children:[u>0&&n("div",{className:"st-horizontal-scrollbar-left",style:{flexShrink:0,width:u}}),w>0&&n("div",m({className:"st-horizontal-scrollbar-middle",onScroll:function(e){var n=e.target.scrollLeft;void 0!==n&&a.current&&a.current.scrollTo({left:n,behavior:"auto"})},ref:C},{children:n("div",{style:{width:w}})})),v>0&&n("div",{className:"st-horizontal-scrollbar-right",style:{flexShrink:0,minWidth:v}})]}))}))},re=function(e,n){var r=t(null),o=r[0],a=r[1],l=t({}),s=l[0],d=l[1],c=i((function(){if(!o)return e;var r=function(e,n,r){var t=r?r.key:e[0],o="ascending";return r&&r.key.accessor===t.accessor&&"ascending"===r.direction&&(o="descending"),{sortedData:w([],n,!0).sort((function(e,n){var r,a,l,i,s=null!==(a=null===(r=null==e?void 0:e.rowData)||void 0===r?void 0:r[t.accessor])&&void 0!==a?a:"",d=null!==(i=null===(l=null==n?void 0:n.rowData)||void 0===l?void 0:l[t.accessor])&&void 0!==i?i:"";return s<d?"ascending"===o?1:-1:s>d?"ascending"===o?-1:1:0})),newSortConfig:{key:t,direction:o}}}(n,e,o).sortedData;return r}),[e,o,n]);return{sort:o,setSort:a,sortedRows:c,hiddenColumns:s,setHiddenColumns:d}};!function(e){e.Left="left",e.Right="right"}(R||(R={}));var te=function(r){var s=r.allowAnimations,d=void 0!==s&&s,c=r.columnEditorPosition,f=void 0===c?R.Right:c,h=r.columnEditorText,v=void 0===h?"Columns":h,p=r.columnResizing,w=void 0!==p&&p,D=r.defaultHeaders,H=r.draggable,S=void 0!==H&&H,k=r.editColumns,L=void 0!==k&&k,M=r.editColumnsInitOpen,T=void 0!==M&&M,B=r.height,O=r.hideFooter,A=void 0!==O&&O,P=r.nextIcon,W=void 0===P?n(x,{className:"st-next-prev-icon"}):P,z=r.onCellChange,U=r.prevIcon,j=void 0===U?n(b,{className:"st-next-prev-icon"}):U,F=r.rows,G=r.rowsPerPage,V=void 0===G?10:G,J=r.selectableCells,X=void 0!==J&&J,Y=r.selectableColumns,q=void 0!==Y&&Y,K=r.shouldPaginate,$=void 0!==K&&K,Q=r.sortDownIcon,Z=void 0===Q?n(E,{className:"st-sort-icon"}):Q,ee=r.sortUpIcon,te=void 0===ee?n(I,{className:"st-sort-icon"}):ee,oe=r.theme,ae=void 0===oe?"light":oe,le=t((function(){return function(e){var n=new Set,r=function(e){var t;e.rowMeta.isExpanded&&n.add(e.rowMeta.rowId.toString()),null===(t=e.rowMeta.children)||void 0===t||t.forEach(r)};return e.forEach(r),n}(F)})),ie=le[0],se=le[1],de=i((function(){return F.map((function(e,n){return m(m({},e),{originalRowIndex:n})}))}),[F]),ce=o(null),ue=o(D),fe=o(null),he=o(null),ve=o(null),ge=o(null),me=o(null),pe=o(null),we=t(!1),Re=we[0],Ce=we[1],be=t(1),xe=be[0],ye=be[1],Ie=t(0),Ee=Ie[0],De=Ie[1],He=t(0),Ne=He[0],Se=He[1],ke=re(de,ue.current),Le=ke.sort,Me=ke.setSort,Te=ke.sortedRows,Be=ke.hiddenColumns,Oe=ke.setHiddenColumns,Ae=a((function(e){var n=String(e);se((function(e){var r=new Set(e);return r.has(n)?r.delete(n):r.add(n),r}))}),[]),Pe=a((function(e){return ie.has(String(e))}),[ie]),We=g((function(e){return e+1}),0)[1],ze=function(e){var n=e.selectableCells,r=e.headers,s=e.rows,d=t(new Set),c=d[0],u=d[1],f=o(!1),h=o(null),v=a((function(){var e=Array.from(c).reduce((function(e,n){var t=n.split("-").map(Number),o=t[0],a=t[1];return e[o]||(e[o]=[]),e[o][a]=s[o][r[a].accessor],e}),{}),n=Object.values(e).map((function(e){return Object.values(e).join("\t")})).join("\n");navigator.clipboard.writeText(n)}),[c,s,r]);l((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"c"===e.key&&v()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[v]);var g=a((function(e,n){return c.has("".concat(e,"-").concat(n))}),[c]),m=a((function(e,n){var r=[];return g(e-1,n)||r.push("st-selected-top-border"),g(e+1,n)||r.push("st-selected-bottom-border"),g(e,n-1)||r.push("st-selected-left-border"),g(e,n+1)||r.push("st-selected-right-border"),r.join(" ")}),[g]),p=i((function(){var e=Math.min.apply(Math,Array.from(c).map((function(e){return parseInt(e.split("-")[0])}))),n=Math.min.apply(Math,Array.from(c).map((function(e){return parseInt(e.split("-")[1])})));return function(r,t){return r===e&&t===n}}),[c]);return{selectedCells:c,handleMouseDown:function(e){var r=e.colIndex,t=e.rowIndex;n&&(f.current=!0,h.current={row:t,col:r},u(new Set(["".concat(t,"-").concat(r)])))},handleMouseOver:function(e,r){if(n&&f.current&&h.current){for(var t=new Set,o=Math.min(h.current.row,e),a=Math.max(h.current.row,e),l=Math.min(h.current.col,r),i=Math.max(h.current.col,r),s=o;s<=a;s++)for(var d=l;d<=i;d++)t.add("".concat(s,"-").concat(d));u(t)}},handleMouseUp:function(){f.current=!1,h.current=null},isSelected:g,getBorderClass:m,isTopLeftCell:p,setSelectedCells:u}}({selectableCells:X,headers:ue.current,rows:Te}),Ue=ze.handleMouseDown,je=ze.handleMouseOver,Fe=ze.handleMouseUp,Ge=ze.isSelected,Ve=ze.getBorderClass,Je=ze.isTopLeftCell,Xe=ze.setSelectedCells,Ye=i((function(){return $?Te.slice((xe-1)*V,xe*V):Te}),[xe,V,$,Te]),qe=a((function(e,n){Me((function(r){return(null==r?void 0:r.key.accessor)!==n?{key:ue.current[e],direction:"ascending"}:"ascending"===(null==r?void 0:r.direction)?{key:ue.current[e],direction:"descending"}:null}))}),[Me]),Ke=a((function(e){ue.current=e,We()}),[]);return l((function(){var e=function(e){var n=e.target;n.closest(".st-cell")||q&&(n.classList.contains("st-header-cell")||n.classList.contains("st-header-label"))||Xe(new Set)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[q,Xe]),u((function(){if(pe.current){var e=pe.current.offsetWidth-pe.current.clientWidth,n=pe.current.clientWidth;De(e),Se(n)}}),[]),n(y.Provider,m({value:{rows:F,tableRows:de}},{children:e("div",m({className:"simple-table-root st-wrapper theme-".concat(ae),style:B?{height:B}:{}},{children:[e("div",m({className:"st-table-wrapper-container"},{children:[e("div",m({className:"st-table-wrapper",onMouseUp:Fe,onMouseLeave:Fe},{children:[n(_,{allowAnimations:d,columnResizing:w,currentRows:Ye,draggable:S,draggedHeaderRef:ce,editColumns:L,forceUpdate:We,getBorderClass:Ve,handleMouseDown:Ue,handleMouseOver:je,headers:ue.current,headersRef:ue,hiddenColumns:Be,hoveredHeaderRef:fe,isRowExpanded:Pe,isSelected:Ge,isTopLeftCell:Je,isWidthDragging:Re,mainBodyRef:he,onCellChange:z,onExpandRowClick:Ae,onSort:qe,onTableHeaderDragEnd:Ke,pinnedLeftRef:ve,pinnedRightRef:ge,scrollbarHorizontalRef:me,scrollbarWidth:Ee,selectableColumns:q,setIsWidthDragging:Ce,setSelectedCells:Xe,shouldPaginate:$,sort:Le,sortDownIcon:Z,sortUpIcon:te,tableBodyContainerRef:pe}),n(N,{columnEditorText:v,editColumns:L,editColumnsInitOpen:T,headers:ue.current,hiddenColumns:Be,position:f,setHiddenColumns:Oe})]})),n(ne,{headersRef:ue,mainBodyRef:he,pinnedLeftRef:ve,pinnedRightRef:ge,scrollbarHorizontalRef:me,tableContentWidth:Ne})]})),n(C,{currentPage:xe,hideFooter:A,nextIcon:W,onPageChange:ye,prevIcon:j,rowsPerPage:V,shouldPaginate:$,totalRows:Te.length})]}))}))};te.defaultProps={allowAnimations:!1,columnEditorPosition:R.Right,columnEditorText:"Columns",columnResizing:!1,defaultHeaders:[],draggable:!1,editColumns:!1,editColumnsInitOpen:!1,height:"",hideFooter:!1,nextIcon:n(x,{className:"st-next-prev-icon"}),onCellChange:function(){},prevIcon:n(b,{className:"st-next-prev-icon"}),rows:[],rowsPerPage:10,selectableCells:!1,selectableColumns:!1,shouldPaginate:!1,sortDownIcon:n(E,{className:"st-sort-icon"}),sortUpIcon:n(I,{className:"st-sort-icon"}),theme:"light"};var oe=v(te);export{oe as SimpleTable};
//# sourceMappingURL=index.es.js.map
