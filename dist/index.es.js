import{jsxs as e,jsx as n,Fragment as r}from"react/jsx-runtime";import{useState as t,useRef as o,useCallback as a,useEffect as i,useMemo as l,createContext as c,forwardRef as s,useContext as d,useLayoutEffect as u,createElement as f,createRef as h,memo as v,useReducer as g}from"react";var m=function(){return m=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},m.apply(this,arguments)};function p(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]])}return r}function w(e,n,r){if(r||2===arguments.length)for(var t,o=0,a=n.length;o<a;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))}"function"==typeof SuppressedError&&SuppressedError;var R,C=function(r){var t=r.currentPage,o=r.hideFooter,a=r.nextIcon,i=r.onPageChange,l=r.prevIcon,c=r.rowsPerPage,s=r.shouldPaginate,d=r.totalRows,u=Math.ceil(d/c),f=t>1,h=t<u,v=function(e){e>=1&&e<=u&&i(e)};return o||!s?null:e("div",m({className:"st-footer"},{children:[n("button",m({className:"st-next-prev-btn ".concat(f?"":"disabled"),onClick:function(){return v(t-1)},disabled:!f},{children:l})),n("button",m({className:"st-next-prev-btn ".concat(h?"":"disabled"),onClick:function(){return v(t+1)},disabled:!h},{children:a})),Array.from({length:u},(function(e,r){return n("button",m({onClick:function(){return v(r+1)},className:"st-page-btn ".concat(t===r+1?"active":"")},{children:r+1}),r)}))]}))},b=function(e){var r=e.className;return n("svg",m({className:r,viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},{children:n("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}))},x=function(e){var r=e.className;return n("svg",m({className:r,viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},{children:n("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})}))},y=c({rows:[],tableRows:[]}),I=function(e){var r=e.className;return n("svg",m({className:r,viewBox:"0 0 20 20",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},{children:n("path",{d:"M5.41 11.41L10 6.83l4.59 4.58L16 10l-6-6-6 6z"})}))},E=function(e){var r=e.className;return n("svg",m({className:r,viewBox:"0 0 20 20",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},{children:n("path",{d:"M5.41 7.59L10 12.17l4.59-4.58L16 9l-6 6-6-6z"})}))},D=function(r){var o=r.checked,a=void 0!==o&&o,i=r.children,l=r.onChange,c=t(a),s=c[0],d=c[1];return e("label",m({className:"st-checkbox-label"},{children:[n("input",{checked:s,className:"st-checkbox-input",onChange:function(){var e=!s;d(e),l&&l(e)},type:"checkbox"}),n("span",m({className:"st-checkbox-custom ".concat(s?"st-checked":"")},{children:s&&n("span",{className:"st-checkbox-checkmark"})})),i]}))},H=function(e){var r=e.headers,t=e.open,o=e.position;e.setOpen;var a=e.setHiddenColumns,i=e.hiddenColumns,l="left"===o?"left":"";return n("div",m({className:"st-column-editor-popout ".concat(t?"open":""," ").concat(l),onClick:function(e){return e.stopPropagation()}},{children:n("div",m({className:"st-column-editor-popout-content"},{children:r.map((function(e,r){return n(D,m({checked:i[e.accessor],onChange:function(n){var r;return a(m(m({},i),((r={})[e.accessor]=n,r)))}},{children:e.label}),r)}))}))}))},S=function(r){var o=r.columnEditorText,a=r.editColumns,i=r.editColumnsInitOpen,l=r.headers,c=r.position,s=void 0===c?"right":c,d=r.setHiddenColumns,u=r.hiddenColumns,f=t(i),h=f[0],v=f[1];return a?e("div",m({className:"st-column-editor ".concat(h?"open":""," ").concat(s),onClick:function(){return function(e){v(e)}(!h)}},{children:[n("div",m({className:"st-column-editor-text"},{children:o})),n(H,{headers:l,open:h,position:s,setOpen:v,setHiddenColumns:d,hiddenColumns:u})]})):null},M=function(e){var n=e.accessor,r=e.rowIndex;return"cell-".concat(n,"-").concat(r)},N=function(e){var n=e.hiddenColumns,r=e.header,t=e.pinned;return n[r.accessor]?null:!t&&!r.pinned||r.pinned===t||null},k=function(r){var t=r.value,o=r.onBlur,a=r.onChange;return e("select",m({value:t.toString(),onBlur:o,onChange:function(e){var n=e.target.value;a("true"===n)}},{children:[n("option",m({value:"true"},{children:"True"})),n("option",m({value:"false"},{children:"False"}))]}))},L=function(e){var r=e.defaultValue,t=e.onBlur,a=e.onChange,i=o(null);return n("input",{className:"editable-cell-input",ref:i,autoFocus:!0,type:"text",defaultValue:null!=r?r:"",onBlur:t,onChange:function(e){var n=e.target.value;a(n)}})},T=function(e){var r=e.defaultValue,t=e.onBlur,a=e.onChange,i=o(null);return n("input",{className:"editable-cell-input",ref:i,autoFocus:!0,defaultValue:r.toString(),onBlur:t,onChange:function(e){var n=e.target.value;/^\d*\.?\d*$/.test(n)&&a(n)}})},B=function(e){var t=e.onChange,o=e.setIsEditing,a=e.value,i=function(e){null==t||t(e)},l=function(){o(!1)};return n(r,{children:"string"==typeof a||null==a?n(L,{defaultValue:a,onBlur:l,onChange:i}):"boolean"==typeof a?n(k,{onBlur:l,onChange:i,value:a}):"number"==typeof a?n(T,{defaultValue:a,onBlur:l,onChange:i}):null})},O=0,A=function(){return function(e){var n=e.callback,r=e.callbackProps,t=e.limit,o=Date.now();(0===O||o-O>=t)&&(O=o,n(r))}},P=Date.now(),W={screenX:0,screenY:0},z=function(e){var n,r,t=e.draggedHeaderRef,a=e.headersRef,l=e.hoveredHeaderRef,c=e.onTableHeaderDragEnd,s=(n=a.current,r=o(n),i((function(){r.current=n}),[n]),r.current);return{handleDragStart:function(e){t.current=e,P=Date.now()},handleDragOver:function(e){var n,r=e.event,o=e.hoveredHeader;if(r.preventDefault(),a.current){var i=r.currentTarget.getAnimations().some((function(e){return"running"===e.playState})),d=r.screenX,u=r.screenY,f=Math.sqrt(Math.pow(d-W.screenX,2)+Math.pow(u-W.screenY,2));l.current=o;var h=w([],a.current,!0),v=h.findIndex((function(e){var n;return e.accessor===(null===(n=t.current)||void 0===n?void 0:n.accessor)})),g=h.findIndex((function(e){return e.accessor===o.accessor})),m=h.splice(v,1)[0];if(h.splice(g,0,m),!(i||o.accessor===(null===(n=t.current)||void 0===n?void 0:n.accessor)||null===t.current||f<10||void 0===v||void 0===g||JSON.stringify(h)===JSON.stringify(a.current))){var p=Date.now();JSON.stringify(h)===JSON.stringify(s)&&p-P<800&&f<50||(P=p,W={screenX:d,screenY:u},c(h))}}},handleDragEnd:function(){t.current=null,l.current=null}}},U=s((function(r,o){var a=r.borderClass,l=r.cellHasChildren,c=r.colIndex,s=r.content,u=r.depth,f=r.draggedHeaderRef,h=r.header,v=r.headersRef,g=r.hoveredHeaderRef,p=r.isRowExpanded,w=r.isSelected,R=r.isTopLeftCell,C=r.onCellChange,b=r.onExpandRowClick,I=r.onMouseDown,D=r.onMouseOver,H=r.onTableHeaderDragEnd,S=r.row,N=r.rowIndex,k=d(y);k.rows,k.tableRows;var L=t(s),T=L[0],O=L[1],P=t(!1),W=P[0],U=P[1],j=z({draggedHeaderRef:f,headersRef:v,hoveredHeaderRef:g,onTableHeaderDragEnd:H}).handleDragOver,F=A(),G=Boolean(null==h?void 0:h.isEditable),V=N%2==0,J="st-cell ".concat(u>0&&h.expandable?"st-cell-depth-".concat(u):""," ").concat(w?R?"st-cell-selected-first-cell ".concat(a):"st-cell-selected ".concat(a):""," ").concat(V?"st-cell-odd-row":"st-cell-even-row"," ").concat(G?"clickable":""," ").concat("right"===h.align?"right-aligned":"");i((function(){"object"!=typeof s&&O(s)}),[s]);return W?n("div",m({className:"st-cell-editing ".concat(V?"st-cell-odd-row":"st-cell-even-row"),id:M({accessor:h.accessor,rowIndex:N+1})},{children:n(B,{onChange:function(e){var n;O(e),null==C||C({accessor:h.accessor,newValue:e,newRowIndex:N,originalRowIndex:null===(n=S.rowMeta)||void 0===n?void 0:n.rowId,row:S})},setIsEditing:U,value:T})})):e("div",m({className:J,id:M({accessor:h.accessor,rowIndex:N+1}),onDoubleClick:function(){return h.isEditable&&U(!0)},onMouseDown:function(){return I(N,c)},onMouseOver:function(){return D(N,c)},onDragOver:function(e){return F({callback:j,callbackProps:{event:e,hoveredHeader:h},limit:50})},ref:o},{children:[h.expandable&&l?p(S.rowMeta.rowId)?n("div",m({className:"st-sort-icon-container",onClick:function(){return b(S.rowMeta.rowId)}},{children:n(E,{className:"st-sort-icon"})})):n("div",m({className:"st-sort-icon-container",onClick:function(){return b(S.rowMeta.rowId)}},{children:n(x,{className:"st-sort-icon"})})):null,n("span",{children:T})]}))})),j=s((function(e,r){return e.visible?n("div",{className:"st-cell",ref:r}):n("div",{ref:r})})),F=function(e){var r=e.lastGroupRow;return n("div",{className:"st-row-separator ".concat(r?"st-last-group-row":"")})},G=function(e){var t=e.allowAnimations,o=e.children,a=p(e,["allowAnimations","children"]);return t?n(V,m({},a,{children:o})):n(r,{children:o})},V=function(e){var a=e.allowHorizontalAnimate,l=void 0===a||a,c=e.children,s=e.draggedHeaderRef,d=e.headersRef,f=e.isBody,h=e.mainBodyRef,v=e.pauseAnimation,g=e.rowIndex,m=o(!1),p=t({}),w=p[0],R=p[1],C=o({}),b=d.current;return u((function(){if(b){var e=function(e){var n=e.currentHeaders,r=e.draggedHeaderRef,t=e.rowIndex,o={};return n.forEach((function(e){var n;if(e){var a=document.getElementById(M({accessor:e.accessor,rowIndex:t}));if(a){var i=a.getAnimations().some((function(e){return"running"===e.playState})),l=a.getBoundingClientRect();i&&(null===(n=null==r?void 0:r.current)||void 0===n?void 0:n.accessor)!==e.accessor?o[e.accessor]=!1:o[e.accessor]=l}}})),o}({currentHeaders:b,draggedHeaderRef:s,rowIndex:g});JSON.stringify(e)!==JSON.stringify(w)&&(C.current=w,R(e))}}),[w,b,s,f,g]),u((function(){var e=h.current,n=function(){m.current=!0},r=function(){m.current=!1};return null==e||e.addEventListener("scroll",n),null==e||e.addEventListener("scrollend",r),function(){null==e||e.removeEventListener("scroll",n),null==e||e.removeEventListener("scrollend",r)}}),[s,h]),i((function(){v||m.current||Object.keys(C.current).length&&b&&b.forEach((function(e){var n=document.getElementById(M({accessor:e.accessor,rowIndex:g}));if(n){var r=C.current[e.accessor],t=w[e.accessor];if(r&&t){var o=r.left-t.left,a=l?0:r.top-t.top,i=Math.abs(o),c=Math.abs(a);(i>10||c>10)&&requestAnimationFrame((function(){n.style.transform="translate(".concat(o,"px, ").concat(a,"px)"),n.style.transition="transform 0s",requestAnimationFrame((function(){n.style.transform="",n.style.transition="transform ".concat(400,"ms ease-out")}))}))}}}))}),[l,w,b,f,v,C,g]),n(r,{children:c})},J=function(r){var t,o=r.getBorderClass,a=r.handleMouseDown,i=r.handleMouseOver,l=r.headers,c=r.hiddenColumns,s=r.isRowExpanded,d=r.isSelected,u=r.isTopLeftCell,v=r.lastGroupRow,g=r.onExpandRowClick,w=r.pinned,R=r.row,C=r.rowIndex,b=r.shouldDisplayLastColumnCell,x=p(r,["getBorderClass","handleMouseDown","handleMouseOver","headers","hiddenColumns","isRowExpanded","isSelected","isTopLeftCell","lastGroupRow","onExpandRowClick","pinned","row","rowIndex","shouldDisplayLastColumnCell"]),y=null===(t=R.rowMeta)||void 0===t?void 0:t.children;return e(G,m({allowAnimations:x.allowAnimations,allowHorizontalAnimate:x.shouldPaginate,draggedHeaderRef:x.draggedHeaderRef,headersRef:x.headersRef,isBody:!0,mainBodyRef:x.mainBodyRef,pauseAnimation:x.isWidthDragging,rowIndex:C+1},{children:[0!==C&&n(F,{lastGroupRow:v}),l.map((function(e,n){if(!N({hiddenColumns:c,header:e,pinned:w}))return null;var r=R.rowData[e.accessor];return e.cellRenderer&&(r=e.cellRenderer(R)),f(U,m({},x,{borderClass:o(C,n),cellHasChildren:((null==y?void 0:y.length)||0)>0,colIndex:n,content:r,header:e,isRowExpanded:s,isSelected:d(C,n),isTopLeftCell:u(C,n),key:n,onExpandRowClick:g,onMouseDown:function(){return a({rowIndex:C,colIndex:n})},onMouseOver:function(){return i(C,n)},row:R,rowIndex:C}))})),n(j,{ref:h(),visible:b})]}))},X=function(t){var o,a,i,l=t.depth,c=void 0===l?0:l,s=t.getNextRowIndex,d=t.index,u=t.lastGroupRow,h=t.pinned,v=t.props,g=t.row,p=((null===(a=null===(o=g.rowMeta)||void 0===o?void 0:o.children)||void 0===a?void 0:a.length)||0)>0,w=s(),R=(null===(i=g.rowMeta)||void 0===i?void 0:i.children)||[];return e(r,{children:[f(J,m({},v,{depth:c,lastGroupRow:u,key:d,pinned:h,row:g,rowIndex:w})),p&&v.isRowExpanded(g.rowMeta.rowId)&&R.map((function(e,r){return n(X,{depth:c+1,getNextRowIndex:s,index:r,pinned:h,props:v,row:e},r)}))]})},Y=function(e){e.headerContainerRef;var r=e.isRowExpanded,t=e.onExpandRowClick,a=e.pinned,l=e.rows,c=e.sectionRef,s=e.templateColumns,d=p(e,["headerContainerRef","isRowExpanded","onExpandRowClick","pinned","rows","sectionRef","templateColumns"]),u=a?"st-table-body-pinned-".concat(a):"st-table-body-main",f=o(0);i((function(){f.current=0}));var h=function(){return f.current++};return n("div",m({className:u,ref:c,style:{gridTemplateColumns:s}},{children:l.map((function(e,o){var i,l;return n(X,{getNextRowIndex:h,index:o,lastGroupRow:Boolean(null===(l=null===(i=e.rowMeta)||void 0===i?void 0:i.children)||void 0===l?void 0:l.length),pinned:a,props:m(m({},d),{isRowExpanded:r,onExpandRowClick:t}),row:e},o)}))}))},q=function(r){var o=r.currentRows,a=r.headerContainerRef,l=r.isRowExpanded,c=r.mainBodyRef,s=r.mainTemplateColumns,d=r.onExpandRowClick,u=r.pinnedLeftColumns,f=r.pinnedLeftRef,h=r.pinnedLeftTemplateColumns,v=r.pinnedRightColumns,g=r.pinnedRightRef,p=r.pinnedRightTemplateColumns,w=r.scrollbarHorizontalRef,R=r.scrollbarWidth,C=r.tableBodyContainerRef;return function(e){var n=e.headerContainerRef,r=e.mainSectionRef,o=e.scrollbarHorizontalRef,a=e.scrollbarWidth,l=t(!1),c=l[0],s=l[1];i((function(){var e=null==n?void 0:n.current,r=null==o?void 0:o.current;if(c&&e)return e.classList.add("st-header-scroll-padding"),null==r||r.classList.add("st-header-scroll-padding"),e.style.setProperty("--st-after-width","".concat(a,"px")),null==r||r.style.setProperty("--st-after-width","".concat(a,"px")),function(){e.classList.remove("st-header-scroll-padding"),null==r||r.classList.remove("st-header-scroll-padding")}}),[n,c,o,a]),i((function(){var e=null==n?void 0:n.current,t=null==r?void 0:r.current;if(t&&e){var o=function(){if(t){var e=t.scrollHeight>t.clientHeight;s(e)}};o();var a=new ResizeObserver((function(){o()}));return a.observe(t),function(){t&&a.unobserve(t)}}}),[n,r])}({headerContainerRef:a,mainSectionRef:C,scrollbarHorizontalRef:w,scrollbarWidth:R}),e("div",m({className:"st-table-body-container",ref:C},{children:[u.length>0&&n(Y,m({},r,{rows:o,templateColumns:h,pinned:"left",sectionRef:f,isRowExpanded:l,onExpandRowClick:d})),n(Y,m({},r,{rows:o,templateColumns:s,sectionRef:c,isRowExpanded:l,onExpandRowClick:d})),v.length>0&&n(Y,m({},r,{rows:o,templateColumns:p,pinned:"right",sectionRef:g,isRowExpanded:l,onExpandRowClick:d}))]}))},K={string:function(e,n,r){if(e===n)return 0;var t=e.localeCompare(n);return"ascending"===r?t:-t},number:function(e,n,r){if(e===n)return 0;var t=e-n;return"ascending"===r?t:-t},boolean:function(e,n,r){if(e===n)return 0;var t=e===n?0:e?-1:1;return"ascending"===r?t:-t},date:function(e,n,r){var t=new Date(e),o=new Date(n);if(t.getTime()===o.getTime())return 0;var a=t.getTime()-o.getTime();return"ascending"===r?a:-a},enum:function(e,n,r){return K.string(e,n,r)},default:function(e,n,r){return e===n?0:null==e?"ascending"===r?-1:1:null==n?"ascending"===r?1:-1:"string"==typeof e&&"string"==typeof n?K.string(e,n,r):"number"==typeof e&&"number"==typeof n?K.number(e,n,r):"boolean"==typeof e&&"boolean"==typeof n?K.boolean(e,n,r):K.string(String(e),String(n),r)}},$=function(e,n,r,t){switch(void 0===r&&(r="string"),r){case"string":return K.string(String(e||""),String(n||""),t);case"number":return K.number(Number(e||0),Number(n||0),t);case"boolean":return K.boolean(Boolean(e),Boolean(n),t);case"date":return K.date(String(e||""),String(n||""),t);case"enum":return K.enum(String(e||""),String(n||""),t);default:return K.default(e,n,t)}},Q=function(e,n,r){var t=r.find((function(e){return e.accessor===n.key.accessor})),o=(null==t?void 0:t.type)||"string",a=n.direction;return w([],e,!0).sort((function(e,r){var t,i,l=null===(t=null==e?void 0:e.rowData)||void 0===t?void 0:t[n.key.accessor],c=null===(i=null==r?void 0:r.rowData)||void 0===i?void 0:i[n.key.accessor];return $(l,c,o,a)})).map((function(e){return e.rowMeta.children&&e.rowMeta.children.length>0?m(m({},e),{rowMeta:m(m({},e.rowMeta),{children:Q(e.rowMeta.children,n,r)})}):e}))},Z=function(e,n,r){var t=function(e,n,r){var t=r.find((function(e){return e.accessor===n.key.accessor})),o=(null==t?void 0:t.type)||"string",a=n.direction,i=[],l=new Map;return e.forEach((function(n){e.some((function(e){var r;return null===(r=e.rowMeta.children)||void 0===r?void 0:r.some((function(e){return e.rowMeta.rowId===n.rowMeta.rowId}))}))||i.push(n),n.rowMeta.children&&n.rowMeta.children.length>0&&l.set(n.rowMeta.rowId,n.rowMeta.children)})),w([],i,!0).sort((function(e,r){var t,i,l=null===(t=null==e?void 0:e.rowData)||void 0===t?void 0:t[n.key.accessor],c=null===(i=null==r?void 0:r.rowData)||void 0===i?void 0:i[n.key.accessor];return $(l,c,o,a)})).map((function(e){var t=m({},e);if(l.has(e.rowMeta.rowId)){var o=l.get(e.rowMeta.rowId)||[],a=Q(o,n,r);t.rowMeta=m(m({},t.rowMeta),{children:a})}return t}))}(n,r,e);return{sortedData:t,newSortConfig:r}},_=function(e){var n=e.event,r=e.forceUpdate,t=e.header,o=e.headersRef,a=e.index;e.reverse;var i=e.setIsWidthDragging;i(!0),n.preventDefault();var l=n.clientX;if(t){var c=t.width,s=function(e){var n=Math.max(c+(e.clientX-l),40);t&&o.current&&(o.current[a].width=n,r())},d=function(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",d),i(!1)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",d)}},ee=s((function(r,o){var a,l=r.columnResizing,c=r.currentRows,s=r.draggable,d=r.draggedHeaderRef,u=r.forceUpdate,f=r.headersRef,h=r.hoveredHeaderRef,v=r.index,g=r.onSort,p=r.onTableHeaderDragEnd,w=r.reverse,R=r.selectableColumns,C=r.setIsWidthDragging,b=r.setSelectedCells,x=r.sort,y=r.sortDownIcon,I=r.sortUpIcon,E=t(!1),D=E[0],H=E[1],S=null===(a=f.current)||void 0===a?void 0:a[v],N=Boolean(null==S?void 0:S.isSortable),k="st-header-cell ".concat(S===h.current?"st-hovered":""," ").concat(D?"st-dragging":""," ").concat(N?"clickable":""," ").concat(s&&!N?"draggable":""," ").concat("right"===(null==S?void 0:S.align)?"right-aligned":""),L=z({draggedHeaderRef:d,headersRef:f,hoveredHeaderRef:h,onTableHeaderDragEnd:p}),T=L.handleDragStart,B=L.handleDragEnd,O=z({draggedHeaderRef:d,headersRef:f,hoveredHeaderRef:h,onTableHeaderDragEnd:p}).handleDragOver,P=A(),W=function(e){var n=e.event,r=e.header;if(R){var t=c.length,o=Array.from({length:t},(function(e,n){return"".concat(n,"-").concat(v)})),a=function(e,n){var r=new Set,o=Math.min(e,n),a=Math.max(e,n);return Array.from({length:t}).forEach((function(e,n){Array.from({length:a-o+1}).forEach((function(e,t){r.add("".concat(n,"-").concat(o+t))}))})),r};n.shiftKey?b((function(e){var n,r=Number(null===(n=Array.from(e)[0])||void 0===n?void 0:n.split("-")[1]),t=Number(o[0].split("-")[1]);return r===t?new Set(o):r>t?a(t,r):a(r,t)})):b(new Set(o))}else r.isSortable&&g(v,r.accessor)};if(i((function(){var e=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"};return document.addEventListener("dragover",e),function(){document.removeEventListener("dragover",e)}}),[]),!S)return null;var U=l&&n("div",{className:"st-header-resize-handle",onMouseDown:function(e){P({callback:_,callbackProps:{event:e,forceUpdate:u,header:S,headersRef:f,index:v,setIsWidthDragging:C},limit:10})}});return e("div",m({className:k,id:M({accessor:S.accessor,rowIndex:0}),onDragOver:function(e){P({callback:O,callbackProps:{event:e,hoveredHeader:S},limit:50})},ref:o,style:{width:S.width}},{children:[w&&U,n("div",m({className:"st-header-label",draggable:s,onClick:function(e){return W({event:e,header:S})},onDragEnd:function(e){e.preventDefault(),H(!1),B()},onDragStart:function(e){s&&S&&function(e){H(!0),T(e)}(S)}},{children:null==S?void 0:S.label})),x&&x.key.accessor===S.accessor&&e("div",m({className:"st-sort-icon-container",onClick:function(e){return W({event:e,header:S})}},{children:["ascending"===x.direction&&I&&I,"descending"===x.direction&&y&&y]})),!w&&U]}))})),ne=function(e,n){i((function(){if(e.current){var r=e.current,t=function(){var e,t=null==r?void 0:r.scrollLeft;void 0!==t&&(null===(e=n.current)||void 0===e||e.scrollTo(t,0))};return r.addEventListener("scroll",t),function(){null==r||r.removeEventListener("scroll",t)}}}),[e,n])},re=function(r){var t,a,i,l=r.allowAnimations,c=r.columnResizing,s=r.currentRows,d=r.draggable,u=r.draggedHeaderRef,f=r.forceUpdate,v=r.headerContainerRef,g=r.headersRef,p=r.hiddenColumns,w=r.hoveredHeaderRef,R=r.isWidthDragging,C=r.mainTemplateColumns,b=r.onSort,x=r.onTableHeaderDragEnd,y=r.pinnedLeftColumns,I=r.pinnedLeftTemplateColumns,E=r.pinnedRightColumns,D=r.pinnedRightTemplateColumns,H=r.selectableColumns,S=r.setIsWidthDragging,M=r.setSelectedCells,k=r.shouldDisplayLastColumnCell,L=r.sort,T=r.sortDownIcon,B=r.sortUpIcon,O=r.mainBodyRef,A=o(null);ne(O,A);return e("div",m({className:"st-header-container",ref:v},{children:[y.length>0&&n("div",m({className:"st-header-pinned-left",style:{gridTemplateColumns:I}},{children:n(G,m({allowAnimations:l,draggedHeaderRef:u,headersRef:g,mainBodyRef:O,pauseAnimation:R,rowIndex:0},{children:null===(t=g.current)||void 0===t?void 0:t.map((function(e,r){return N({hiddenColumns:p,header:e,pinned:"left"})?n(ee,{columnResizing:c,currentRows:s,draggable:d,draggedHeaderRef:u,forceUpdate:f,headersRef:g,hoveredHeaderRef:w,index:r,onSort:b,onTableHeaderDragEnd:x,ref:h(),selectableColumns:H,setIsWidthDragging:S,setSelectedCells:M,sort:L,sortDownIcon:T,sortUpIcon:B},e.accessor):null}))}))})),n("div",m({className:"st-header-main",onScroll:function(e){var n,r,t=null===(n=A.current)||void 0===n?void 0:n.scrollLeft;void 0!==t&&(null===(r=O.current)||void 0===r||r.scrollTo(t,0))},ref:A,style:{gridTemplateColumns:C}},{children:e(G,m({allowAnimations:l,draggedHeaderRef:u,headersRef:g,mainBodyRef:O,pauseAnimation:R,rowIndex:0},{children:[null===(a=g.current)||void 0===a?void 0:a.map((function(e,r){return N({hiddenColumns:p,header:e})?n(ee,{columnResizing:c,currentRows:s,draggable:d,draggedHeaderRef:u,forceUpdate:f,headersRef:g,hoveredHeaderRef:w,index:r,onSort:b,onTableHeaderDragEnd:x,ref:h(),selectableColumns:H,setIsWidthDragging:S,setSelectedCells:M,sort:L,sortDownIcon:T,sortUpIcon:B},e.accessor):null})),n(j,{ref:h(),visible:k})]}))})),E.length>0&&n("div",m({className:"st-header-pinned-right",style:{gridTemplateColumns:D}},{children:e(G,m({allowAnimations:l,draggedHeaderRef:u,headersRef:g,mainBodyRef:O,pauseAnimation:R,rowIndex:0},{children:[null===(i=g.current)||void 0===i?void 0:i.map((function(e,r){return N({hiddenColumns:p,header:e,pinned:"right"})?n(ee,{columnResizing:c,currentRows:s,draggable:d,draggedHeaderRef:u,forceUpdate:f,headersRef:g,hoveredHeaderRef:w,index:r,onSort:b,onTableHeaderDragEnd:x,reverse:!0,ref:h(),selectableColumns:H,setIsWidthDragging:S,setSelectedCells:M,sort:L,sortDownIcon:T,sortUpIcon:B},e.accessor):null})),n(j,{ref:h(),visible:k})]}))}))]}))},te=function(r){var t=r.allowAnimations,a=r.columnResizing,i=r.currentRows,c=r.draggable,s=r.draggedHeaderRef,d=r.editColumns,u=r.forceUpdate,f=r.getBorderClass,h=r.handleMouseDown,v=r.handleMouseOver,g=r.headersRef,p=r.hiddenColumns,w=r.hoveredHeaderRef,R=r.isRowExpanded,C=r.isSelected,b=r.isTopLeftCell,x=r.isWidthDragging,y=r.mainBodyRef,I=r.onCellChange,E=r.onExpandRowClick,D=r.onSort,H=r.onTableHeaderDragEnd,S=r.pinnedLeftRef,M=r.pinnedRightRef,N=r.scrollbarHorizontalRef,k=r.scrollbarWidth,L=r.selectableColumns,T=r.setIsWidthDragging,B=r.setSelectedCells,O=r.shouldPaginate,A=r.sort,P=r.sortDownIcon,W=r.sortUpIcon,z=r.tableBodyContainerRef,U=o(null),j=g.current.filter((function(e){return!e.hide&&!e.pinned})),F=l((function(){return!!y.current&&j.reduce((function(e,n){return e+n.width}),0)<y.current.clientWidth}),[j,y]),G=g.current.filter((function(e){return"left"===e.pinned&&!0!==e.hide})),V=g.current.filter((function(e){return"right"===e.pinned&&!0!==e.hide})),J=l((function(){return"".concat(G.map((function(e){return"".concat(e.width,"px")})).join(" "))}),[G]),X=l((function(){return"".concat(j.filter((function(e){return!0!==p[e.accessor]})).map((function(e){return"".concat(e.width,"px")})).join(" ")," 1fr")}),[j,p]),Y=l((function(){return"".concat(V.map((function(e){return"".concat(e.width,"px")})).join(" "))}),[V]),K={allowAnimations:t,columnResizing:a,currentRows:i,draggable:c,draggedHeaderRef:s,forceUpdate:u,headerContainerRef:U,headersRef:g,hiddenColumns:p,hoveredHeaderRef:w,isWidthDragging:x,mainBodyRef:y,mainTemplateColumns:X,onSort:D,onTableHeaderDragEnd:H,pinnedLeftColumns:G,pinnedLeftTemplateColumns:J,pinnedRightColumns:V,pinnedRightTemplateColumns:Y,selectableColumns:L,setIsWidthDragging:T,setSelectedCells:B,shouldDisplayLastColumnCell:F,sort:A,sortDownIcon:P,sortUpIcon:W,tableBodyContainerRef:z},$={allowAnimations:t,currentRows:i,draggedHeaderRef:s,getBorderClass:f,handleMouseDown:h,handleMouseOver:v,headerContainerRef:U,headers:g.current,headersRef:g,hiddenColumns:p,hoveredHeaderRef:w,isRowExpanded:R,isSelected:C,isTopLeftCell:b,isWidthDragging:x,mainBodyRef:y,mainTemplateColumns:X,onCellChange:I,onExpandRowClick:E,onTableHeaderDragEnd:H,pinnedLeftColumns:G,pinnedLeftRef:S,pinnedLeftTemplateColumns:J,pinnedRightColumns:V,pinnedRightRef:M,pinnedRightTemplateColumns:Y,scrollbarHorizontalRef:N,scrollbarWidth:k,shouldDisplayLastColumnCell:F,shouldPaginate:O,tableBodyContainerRef:z};return e("div",m({className:"st-table-content",style:{width:d?"calc(100% - 27.5px)":"100%"}},{children:[n(re,m({},K)),n(q,m({},$))]}))},oe=function(e){var n=e.callback,r=e.ref,t=e.widthAttribute;i((function(){var e=r.current;if(e){var o=function(){n(e[t]||0)};o();var a=new ResizeObserver((function(){o()}));return a.observe(e),function(){return a.disconnect()}}}),[n,r,t])},ae=function(r){r.headersRef;var a=r.mainBodyRef,i=r.pinnedLeftRef,l=r.pinnedRightRef,c=r.scrollbarHorizontalRef,s=r.tableContentWidth,d=t(0),u=d[0],f=d[1],h=t(0),v=h[0],g=h[1],p=t(0),w=p[0],R=p[1],C=o(null);return oe({widthAttribute:"offsetWidth",callback:f,ref:i}),oe({widthAttribute:"scrollWidth",callback:R,ref:a}),oe({widthAttribute:"offsetWidth",callback:g,ref:l}),ne(a,C),!a.current||a.current.scrollWidth<=a.current.clientWidth?null:n("div",m({className:"st-horizontal-scrollbar-container",ref:c},{children:e("div",m({style:{width:s}},{children:[u>0&&n("div",{className:"st-horizontal-scrollbar-left",style:{flexShrink:0,width:u}}),w>0&&n("div",m({className:"st-horizontal-scrollbar-middle",onScroll:function(e){var n=e.target.scrollLeft;void 0!==n&&a.current&&a.current.scrollTo({left:n,behavior:"auto"})},ref:C},{children:n("div",{style:{width:w}})})),v>0&&n("div",{className:"st-horizontal-scrollbar-right",style:{flexShrink:0,minWidth:v}})]}))}))};!function(e){e.Left="left",e.Right="right"}(R||(R={}));var ie=function(r){var c=r.allowAnimations,s=void 0!==c&&c,d=r.columnEditorPosition,f=void 0===d?R.Right:d,h=r.columnEditorText,v=void 0===h?"Columns":h,p=r.columnResizing,w=void 0!==p&&p,D=r.defaultHeaders,H=r.draggable,M=void 0!==H&&H,N=r.editColumns,k=void 0!==N&&N,L=r.editColumnsInitOpen,T=void 0!==L&&L,B=r.height,O=r.hideFooter,A=void 0!==O&&O,P=r.nextIcon,W=void 0===P?n(x,{className:"st-next-prev-icon"}):P,z=r.onCellChange,U=r.prevIcon,j=void 0===U?n(b,{className:"st-next-prev-icon"}):U,F=r.rows,G=r.rowsPerPage,V=void 0===G?10:G,J=r.selectableCells,X=void 0!==J&&J,Y=r.selectableColumns,q=void 0!==Y&&Y,K=r.shouldPaginate,$=void 0!==K&&K,Q=r.sortDownIcon,_=void 0===Q?n(E,{className:"st-sort-icon"}):Q,ee=r.sortUpIcon,ne=void 0===ee?n(I,{className:"st-sort-icon"}):ee,re=r.theme,oe=void 0===re?"light":re,ie=t((function(){return function(e){var n=new Set,r=function(e){var t;e.rowMeta.isExpanded&&n.add(e.rowMeta.rowId.toString()),null===(t=e.rowMeta.children)||void 0===t||t.forEach(r)};return e.forEach(r),n}(F)})),le=ie[0],ce=ie[1],se=l((function(){return F.map((function(e,n){return m(m({},e),{originalRowIndex:n})}))}),[F]),de=o(null),ue=o(D),fe=o(null),he=o(null),ve=o(null),ge=o(null),me=o(null),pe=o(null),we=t(!1),Re=we[0],Ce=we[1],be=t(1),xe=be[0],ye=be[1],Ie=t(0),Ee=Ie[0],De=Ie[1],He=t(0),Se=He[0],Me=He[1],Ne=function(e,n){var r=t(null),o=r[0],a=r[1],i=t({}),c=i[0],s=i[1],d=l((function(){return o?Z(n,e,o).sortedData:e}),[e,o,n]);return{sort:o,setSort:a,updateSort:function(e,r){var t=n.find((function(e){return e.accessor===r}));t&&a((function(e){return e&&e.key.accessor===r?"ascending"===e.direction?{key:t,direction:"descending"}:null:{key:t,direction:"ascending"}}))},sortedRows:d,hiddenColumns:c,setHiddenColumns:s}}(se,ue.current),ke=Ne.sort,Le=Ne.sortedRows,Te=Ne.hiddenColumns,Be=Ne.setHiddenColumns,Oe=Ne.updateSort,Ae=a((function(e){var n=String(e);ce((function(e){var r=new Set(e);return r.has(n)?r.delete(n):r.add(n),r}))}),[]),Pe=a((function(e){return le.has(String(e))}),[le]),We=g((function(e){return e+1}),0)[1],ze=function(e){var n=e.selectableCells,r=e.headers,c=e.rows,s=t(new Set),d=s[0],u=s[1],f=o(!1),h=o(null),v=a((function(){var e=Array.from(d).reduce((function(e,n){var t=n.split("-").map(Number),o=t[0],a=t[1];return e[o]||(e[o]=[]),e[o][a]=c[o][r[a].accessor],e}),{}),n=Object.values(e).map((function(e){return Object.values(e).join("\t")})).join("\n");navigator.clipboard.writeText(n)}),[d,c,r]);i((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"c"===e.key&&v()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[v]);var g=a((function(e,n){return d.has("".concat(e,"-").concat(n))}),[d]),m=a((function(e,n){var r=[];return g(e-1,n)||r.push("st-selected-top-border"),g(e+1,n)||r.push("st-selected-bottom-border"),g(e,n-1)||r.push("st-selected-left-border"),g(e,n+1)||r.push("st-selected-right-border"),r.join(" ")}),[g]),p=l((function(){var e=Math.min.apply(Math,Array.from(d).map((function(e){return parseInt(e.split("-")[0])}))),n=Math.min.apply(Math,Array.from(d).map((function(e){return parseInt(e.split("-")[1])})));return function(r,t){return r===e&&t===n}}),[d]);return{selectedCells:d,handleMouseDown:function(e){var r=e.colIndex,t=e.rowIndex;n&&(f.current=!0,h.current={row:t,col:r},u(new Set(["".concat(t,"-").concat(r)])))},handleMouseOver:function(e,r){if(n&&f.current&&h.current){for(var t=new Set,o=Math.min(h.current.row,e),a=Math.max(h.current.row,e),i=Math.min(h.current.col,r),l=Math.max(h.current.col,r),c=o;c<=a;c++)for(var s=i;s<=l;s++)t.add("".concat(c,"-").concat(s));u(t)}},handleMouseUp:function(){f.current=!1,h.current=null},isSelected:g,getBorderClass:m,isTopLeftCell:p,setSelectedCells:u}}({selectableCells:X,headers:ue.current,rows:Le}),Ue=ze.handleMouseDown,je=ze.handleMouseOver,Fe=ze.handleMouseUp,Ge=ze.isSelected,Ve=ze.getBorderClass,Je=ze.isTopLeftCell,Xe=ze.setSelectedCells,Ye=l((function(){return $?Le.slice((xe-1)*V,xe*V):Le}),[xe,V,$,Le]),qe=a((function(e,n){Oe(e,n)}),[Oe]),Ke=a((function(e){ue.current=e,We()}),[]);return i((function(){var e=function(e){var n=e.target;n.closest(".st-cell")||q&&(n.classList.contains("st-header-cell")||n.classList.contains("st-header-label"))||Xe(new Set)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[q,Xe]),u((function(){if(pe.current){var e=pe.current.offsetWidth-pe.current.clientWidth,n=pe.current.clientWidth;De(e),Me(n)}}),[]),n(y.Provider,m({value:{rows:F,tableRows:se}},{children:e("div",m({className:"simple-table-root st-wrapper theme-".concat(oe),style:B?{height:B}:{}},{children:[e("div",m({className:"st-table-wrapper-container"},{children:[e("div",m({className:"st-table-wrapper",onMouseUp:Fe,onMouseLeave:Fe},{children:[n(te,{allowAnimations:s,columnResizing:w,currentRows:Ye,draggable:M,draggedHeaderRef:de,editColumns:k,forceUpdate:We,getBorderClass:Ve,handleMouseDown:Ue,handleMouseOver:je,headers:ue.current,headersRef:ue,hiddenColumns:Te,hoveredHeaderRef:fe,isRowExpanded:Pe,isSelected:Ge,isTopLeftCell:Je,isWidthDragging:Re,mainBodyRef:he,onCellChange:z,onExpandRowClick:Ae,onSort:qe,onTableHeaderDragEnd:Ke,pinnedLeftRef:ve,pinnedRightRef:ge,scrollbarHorizontalRef:me,scrollbarWidth:Ee,selectableColumns:q,setIsWidthDragging:Ce,setSelectedCells:Xe,shouldPaginate:$,sort:ke,sortDownIcon:_,sortUpIcon:ne,tableBodyContainerRef:pe}),n(S,{columnEditorText:v,editColumns:k,editColumnsInitOpen:T,headers:ue.current,hiddenColumns:Te,position:f,setHiddenColumns:Be})]})),n(ae,{headersRef:ue,mainBodyRef:he,pinnedLeftRef:ve,pinnedRightRef:ge,scrollbarHorizontalRef:me,tableContentWidth:Se})]})),n(C,{currentPage:xe,hideFooter:A,nextIcon:W,onPageChange:ye,prevIcon:j,rowsPerPage:V,shouldPaginate:$,totalRows:Le.length})]}))}))};ie.defaultProps={allowAnimations:!1,columnEditorPosition:R.Right,columnEditorText:"Columns",columnResizing:!1,defaultHeaders:[],draggable:!1,editColumns:!1,editColumnsInitOpen:!1,height:"",hideFooter:!1,nextIcon:n(x,{className:"st-next-prev-icon"}),onCellChange:function(){},prevIcon:n(b,{className:"st-next-prev-icon"}),rows:[],rowsPerPage:10,selectableCells:!1,selectableColumns:!1,shouldPaginate:!1,sortDownIcon:n(E,{className:"st-sort-icon"}),sortUpIcon:n(I,{className:"st-sort-icon"}),theme:"light"};var le=v(ie);export{le as SimpleTable};
//# sourceMappingURL=index.es.js.map
