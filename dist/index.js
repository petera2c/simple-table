"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),n=require("react"),r=function(){return r=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)};function t(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]])}return r}function o(e,n,r){if(r||2===arguments.length)for(var t,o=0,a=n.length;o<a;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))}"function"==typeof SuppressedError&&SuppressedError;var a,s=function(n){var t=n.currentPage,o=n.hideFooter,a=n.nextIcon,s=n.onPageChange,l=n.prevIcon,i=n.rowsPerPage,c=n.shouldPaginate,d=n.totalRows,u=Math.ceil(d/i),f=t>1,h=t<u,v=function(e){e>=1&&e<=u&&s(e)};return o||!c?null:e.jsxs("div",r({className:"st-footer"},{children:[e.jsx("button",r({className:"st-next-prev-btn ".concat(f?"":"disabled"),onClick:function(){return v(t-1)},disabled:!f},{children:l})),e.jsx("button",r({className:"st-next-prev-btn ".concat(h?"":"disabled"),onClick:function(){return v(t+1)},disabled:!h},{children:a})),Array.from({length:u},(function(n,o){return e.jsx("button",r({onClick:function(){return v(o+1)},className:"st-page-btn ".concat(t===o+1?"active":"")},{children:o+1}),o)}))]}))},l=function(n){var t=n.className;return e.jsx("svg",r({className:t,viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}))},i=function(n){var t=n.className;return e.jsx("svg",r({className:t,viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})}))},c=n.createContext({rows:[],tableRows:[]}),d=function(n){var t=n.className;return e.jsx("svg",r({className:t,viewBox:"0 0 20 20",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M5.41 11.41L10 6.83l4.59 4.58L16 10l-6-6-6 6z"})}))},u=function(n){var t=n.className;return e.jsx("svg",r({className:t,viewBox:"0 0 20 20",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M5.41 7.59L10 12.17l4.59-4.58L16 9l-6 6-6-6z"})}))},f=function(t){var o=t.checked,a=void 0!==o&&o,s=t.children,l=t.onChange,i=n.useState(a),c=i[0],d=i[1];return e.jsxs("label",r({className:"st-checkbox-label"},{children:[e.jsx("input",{checked:c,className:"st-checkbox-input",onChange:function(){var e=!c;d(e),l&&l(e)},type:"checkbox"}),e.jsx("span",r({className:"st-checkbox-custom ".concat(c?"st-checked":"")},{children:c&&e.jsx("span",{className:"st-checkbox-checkmark"})})),s]}))},h=function(n){var t=n.headers,o=n.open,a=n.position;n.setOpen;var s=n.setHiddenColumns,l=n.hiddenColumns,i="left"===a?"left":"";return e.jsx("div",r({className:"st-column-editor-popout ".concat(o?"open":""," ").concat(i),onClick:function(e){return e.stopPropagation()}},{children:e.jsx("div",r({className:"st-column-editor-popout-content"},{children:t.map((function(n,t){return e.jsx(f,r({checked:l[n.accessor],onChange:function(e){var t;return s(r(r({},l),((t={})[n.accessor]=e,t)))}},{children:n.label}),t)}))}))}))},v=function(t){var o=t.columnEditorText,a=t.editColumns,s=t.editColumnsInitOpen,l=t.headers,i=t.position,c=void 0===i?"right":i,d=t.setHiddenColumns,u=t.hiddenColumns,f=n.useState(s),v=f[0],m=f[1];return a?e.jsxs("div",r({className:"st-column-editor ".concat(v?"open":""," ").concat(c),onClick:function(){return function(e){m(e)}(!v)}},{children:[e.jsx("div",r({className:"st-column-editor-text"},{children:o})),e.jsx(h,{headers:l,open:v,position:c,setOpen:m,setHiddenColumns:d,hiddenColumns:u})]})):null},m=function(e){var n=e.accessor,r=e.rowIndex;return"cell-".concat(n,"-").concat(r)},g=function(e){var n=e.hiddenColumns,r=e.header,t=e.pinned;return n[r.accessor]?null:!t&&!r.pinned||r.pinned===t||null},p=function(n){var t=n.value,o=n.onBlur,a=n.onChange;return e.jsxs("select",r({value:t.toString(),onBlur:o,onChange:function(e){var n=e.target.value;a("true"===n)}},{children:[e.jsx("option",r({value:"true"},{children:"True"})),e.jsx("option",r({value:"false"},{children:"False"}))]}))},w=function(r){var t=r.defaultValue,o=r.onBlur,a=r.onChange,s=n.useRef(null);return e.jsx("input",{className:"editable-cell-input",ref:s,autoFocus:!0,type:"text",defaultValue:null!=t?t:"",onBlur:o,onChange:function(e){var n=e.target.value;a(n)}})},R=function(r){var t=r.defaultValue,o=r.onBlur,a=r.onChange,s=n.useRef(null);return e.jsx("input",{className:"editable-cell-input",ref:s,autoFocus:!0,defaultValue:t.toString(),onBlur:o,onChange:function(e){var n=e.target.value;/^\d*\.?\d*$/.test(n)&&a(n)}})},x=function(n){var r=n.onChange,t=n.setIsEditing,o=n.value,a=function(e){null==r||r(e)},s=function(){t(!1)};return e.jsx(e.Fragment,{children:"string"==typeof o||null==o?e.jsx(w,{defaultValue:o,onBlur:s,onChange:a}):"boolean"==typeof o?e.jsx(p,{onBlur:s,onChange:a,value:o}):"number"==typeof o?e.jsx(R,{defaultValue:o,onBlur:s,onChange:a}):null})},C=0,b=function(){return function(e){var n=e.callback,r=e.callbackProps,t=e.limit,o=Date.now();(0===C||o-C>=t)&&(C=o,n(r))}},j=Date.now(),y={screenX:0,screenY:0},E=function(e){var r,t,a=e.draggedHeaderRef,s=e.headersRef,l=e.hoveredHeaderRef,i=e.onTableHeaderDragEnd,c=(r=s.current,t=n.useRef(r),n.useEffect((function(){t.current=r}),[r]),t.current);return{handleDragStart:function(e){a.current=e,j=Date.now()},handleDragOver:function(e){var n,r=e.event,t=e.hoveredHeader;if(r.preventDefault(),s.current){var d=r.currentTarget.getAnimations().some((function(e){return"running"===e.playState})),u=r.screenX,f=r.screenY,h=Math.sqrt(Math.pow(u-y.screenX,2)+Math.pow(f-y.screenY,2));l.current=t;var v=o([],s.current,!0),m=v.findIndex((function(e){var n;return e.accessor===(null===(n=a.current)||void 0===n?void 0:n.accessor)})),g=v.findIndex((function(e){return e.accessor===t.accessor})),p=v.splice(m,1)[0];if(v.splice(g,0,p),!(d||t.accessor===(null===(n=a.current)||void 0===n?void 0:n.accessor)||null===a.current||h<10||void 0===m||void 0===g||JSON.stringify(v)===JSON.stringify(s.current))){var w=Date.now();JSON.stringify(v)===JSON.stringify(c)&&w-j<800&&h<50||(j=w,y={screenX:u,screenY:f},i(v))}}},handleDragEnd:function(){a.current=null,l.current=null}}},I=n.forwardRef((function(t,o){var a,s=t.borderClass,l=t.cellHasChildren,d=t.colIndex,f=t.content,h=t.depth,v=t.draggedHeaderRef,g=t.header,p=t.headersRef,w=t.hoveredHeaderRef,R=t.isRowExpanded,C=t.isSelected,j=t.isTopLeftCell,y=t.onCellChange,I=t.onExpandRowClick,S=t.onMouseDown,D=t.onMouseOver,H=t.onTableHeaderDragEnd,k=t.row,M=t.rowIndex,N=n.useContext(c),L=N.rows,T=N.tableRows,B=n.useState(f),O=B[0],A=B[1],P=n.useState(!1),W=P[0],z=P[1],U=E({draggedHeaderRef:v,headersRef:p,hoveredHeaderRef:w,onTableHeaderDragEnd:H}).handleDragOver,F=b(),G=Boolean(null==g?void 0:g.isEditable),V=M%2==0,J="st-cell ".concat(h>0&&g.expandable?"st-cell-depth-".concat(h):""," ").concat(C?j?"st-cell-selected-first-cell ".concat(s):"st-cell-selected ".concat(s):""," ").concat(V?"st-cell-odd-row":"st-cell-even-row"," ").concat(G?"clickable":""," ").concat("right"===g.align?"right-aligned":"");n.useEffect((function(){"object"!=typeof f&&A(f)}),[f]),n.useEffect((function(){}),[g.accessor,O,L,null===(a=k.rowMeta)||void 0===a?void 0:a.rowId,T]);return W?e.jsx("div",r({className:"st-cell-editing ".concat(V?"st-cell-odd-row":"st-cell-even-row"),id:m({accessor:g.accessor,rowIndex:M+1})},{children:e.jsx(x,{onChange:function(e){var n;A(e),null==y||y({accessor:g.accessor,newValue:e,newRowIndex:M,originalRowIndex:null===(n=k.rowMeta)||void 0===n?void 0:n.rowId,row:k})},setIsEditing:z,value:O})})):e.jsxs("div",r({className:J,id:m({accessor:g.accessor,rowIndex:M+1}),onDoubleClick:function(){return g.isEditable&&z(!0)},onMouseDown:function(){return S(M,d)},onMouseOver:function(){return D(M,d)},onDragOver:function(e){return F({callback:U,callbackProps:{event:e,hoveredHeader:g},limit:50})},ref:o},{children:[g.expandable&&l?R(k.rowMeta.rowId)?e.jsx("div",r({className:"st-sort-icon-container",onClick:function(){return I(k.rowMeta.rowId)}},{children:e.jsx(u,{className:"st-sort-icon"})})):e.jsx("div",r({className:"st-sort-icon-container",onClick:function(){return I(k.rowMeta.rowId)}},{children:e.jsx(i,{className:"st-sort-icon"})})):null,e.jsx("span",{children:O})]}))})),S=n.forwardRef((function(n,r){return n.visible?e.jsx("div",{className:"st-cell",ref:r}):e.jsx("div",{ref:r})})),D=function(n){var r=n.lastGroupRow;return e.jsx("div",{className:"st-row-separator ".concat(r?"st-last-group-row":"")})},H=function(n){var o=n.allowAnimations,a=n.children,s=t(n,["allowAnimations","children"]);return o?e.jsx(k,r({},s,{children:a})):e.jsx(e.Fragment,{children:a})},k=function(r){var t=r.allowHorizontalAnimate,o=void 0===t||t,a=r.children,s=r.draggedHeaderRef,l=r.headersRef,i=r.isBody,c=r.mainBodyRef,d=r.pauseAnimation,u=r.rowIndex,f=n.useRef(!1),h=n.useState({}),v=h[0],g=h[1],p=n.useRef({}),w=l.current;return n.useLayoutEffect((function(){if(w){var e=function(e){var n=e.currentHeaders,r=e.draggedHeaderRef,t=e.rowIndex,o={};return n.forEach((function(e){var n;if(e){var a=document.getElementById(m({accessor:e.accessor,rowIndex:t}));if(a){var s=a.getAnimations().some((function(e){return"running"===e.playState})),l=a.getBoundingClientRect();s&&(null===(n=null==r?void 0:r.current)||void 0===n?void 0:n.accessor)!==e.accessor?o[e.accessor]=!1:o[e.accessor]=l}}})),o}({currentHeaders:w,draggedHeaderRef:s,rowIndex:u});JSON.stringify(e)!==JSON.stringify(v)&&(p.current=v,g(e))}}),[v,w,s,i,u]),n.useLayoutEffect((function(){var e=c.current,n=function(){f.current=!0},r=function(){f.current=!1};return null==e||e.addEventListener("scroll",n),null==e||e.addEventListener("scrollend",r),function(){null==e||e.removeEventListener("scroll",n),null==e||e.removeEventListener("scrollend",r)}}),[s,c]),n.useEffect((function(){d||f.current||Object.keys(p.current).length&&w&&w.forEach((function(e){var n=document.getElementById(m({accessor:e.accessor,rowIndex:u}));if(n){var r=p.current[e.accessor],t=v[e.accessor];if(r&&t){var a=r.left-t.left,s=o?0:r.top-t.top,l=Math.abs(a),i=Math.abs(s);(l>10||i>10)&&requestAnimationFrame((function(){n.style.transform="translate(".concat(a,"px, ").concat(s,"px)"),n.style.transition="transform 0s",requestAnimationFrame((function(){n.style.transform="",n.style.transition="transform ".concat(400,"ms ease-out")}))}))}}}))}),[o,v,w,i,d,p,u]),e.jsx(e.Fragment,{children:a})},M=function(o){var a,s=o.getBorderClass,l=o.handleMouseDown,i=o.handleMouseOver,c=o.headers,d=o.hiddenColumns,u=o.isRowExpanded,f=o.isSelected,h=o.isTopLeftCell,v=o.lastGroupRow,m=o.onExpandRowClick,p=o.pinned,w=o.row,R=o.rowIndex,x=o.shouldDisplayLastColumnCell,C=t(o,["getBorderClass","handleMouseDown","handleMouseOver","headers","hiddenColumns","isRowExpanded","isSelected","isTopLeftCell","lastGroupRow","onExpandRowClick","pinned","row","rowIndex","shouldDisplayLastColumnCell"]),b=null===(a=w.rowMeta)||void 0===a?void 0:a.children;return e.jsxs(H,r({allowAnimations:C.allowAnimations,allowHorizontalAnimate:C.shouldPaginate,draggedHeaderRef:C.draggedHeaderRef,headersRef:C.headersRef,isBody:!0,mainBodyRef:C.mainBodyRef,pauseAnimation:C.isWidthDragging,rowIndex:R+1},{children:[0!==R&&e.jsx(D,{lastGroupRow:v}),c.map((function(e,t){if(!g({hiddenColumns:d,header:e,pinned:p}))return null;var o=w.rowData[e.accessor];return e.cellRenderer&&(o=e.cellRenderer(w)),n.createElement(I,r({},C,{borderClass:s(R,t),cellHasChildren:((null==b?void 0:b.length)||0)>0,colIndex:t,content:o,header:e,isRowExpanded:u,isSelected:f(R,t),isTopLeftCell:h(R,t),key:t,onExpandRowClick:m,onMouseDown:function(){return l({rowIndex:R,colIndex:t})},onMouseOver:function(){return i(R,t)},row:w,rowIndex:R}))})),e.jsx(S,{ref:n.createRef(),visible:x})]}))},N=function(t){var o,a,s,l=t.depth,i=void 0===l?0:l,c=t.getNextRowIndex,d=t.index,u=t.lastGroupRow,f=t.pinned,h=t.props,v=t.row,m=((null===(a=null===(o=v.rowMeta)||void 0===o?void 0:o.children)||void 0===a?void 0:a.length)||0)>0,g=c(),p=(null===(s=v.rowMeta)||void 0===s?void 0:s.children)||[];return e.jsxs(e.Fragment,{children:[n.createElement(M,r({},h,{depth:i,lastGroupRow:u,key:d,pinned:f,row:v,rowIndex:g})),m&&h.isRowExpanded(v.rowMeta.rowId)&&p.map((function(n,r){return e.jsx(N,{depth:i+1,getNextRowIndex:c,index:r,pinned:f,props:h,row:n},r)}))]})},L=function(o){o.headerContainerRef;var a=o.isRowExpanded,s=o.onExpandRowClick,l=o.pinned,i=o.rows,c=o.sectionRef,d=o.templateColumns,u=t(o,["headerContainerRef","isRowExpanded","onExpandRowClick","pinned","rows","sectionRef","templateColumns"]),f=l?"st-table-body-pinned-".concat(l):"st-table-body-main",h=n.useRef(0);n.useEffect((function(){h.current=0}));var v=function(){return h.current++};return e.jsx("div",r({className:f,ref:c,style:{gridTemplateColumns:d}},{children:i.map((function(n,t){var o,i;return e.jsx(N,{getNextRowIndex:v,index:t,lastGroupRow:Boolean(null===(i=null===(o=n.rowMeta)||void 0===o?void 0:o.children)||void 0===i?void 0:i.length),pinned:l,props:r(r({},u),{isRowExpanded:a,onExpandRowClick:s}),row:n},t)}))}))},T=function(t){var o=t.currentRows,a=t.headerContainerRef,s=t.isRowExpanded,l=t.mainBodyRef,i=t.mainTemplateColumns,c=t.onExpandRowClick,d=t.pinnedLeftColumns,u=t.pinnedLeftRef,f=t.pinnedLeftTemplateColumns,h=t.pinnedRightColumns,v=t.pinnedRightRef,m=t.pinnedRightTemplateColumns,g=t.scrollbarHorizontalRef,p=t.scrollbarWidth,w=t.tableBodyContainerRef;return function(e){var r=e.headerContainerRef,t=e.mainSectionRef,o=e.scrollbarHorizontalRef,a=e.scrollbarWidth,s=n.useState(!1),l=s[0],i=s[1];n.useEffect((function(){var e=null==r?void 0:r.current,n=null==o?void 0:o.current;if(l&&e)return e.classList.add("st-header-scroll-padding"),null==n||n.classList.add("st-header-scroll-padding"),e.style.setProperty("--st-after-width","".concat(a,"px")),null==n||n.style.setProperty("--st-after-width","".concat(a,"px")),function(){e.classList.remove("st-header-scroll-padding"),null==n||n.classList.remove("st-header-scroll-padding")}}),[r,l,o,a]),n.useEffect((function(){var e=null==r?void 0:r.current,n=null==t?void 0:t.current;if(n&&e){var o=function(){if(n){var e=n.scrollHeight>n.clientHeight;i(e)}};o();var a=new ResizeObserver((function(){o()}));return a.observe(n),function(){n&&a.unobserve(n)}}}),[r,t])}({headerContainerRef:a,mainSectionRef:w,scrollbarHorizontalRef:g,scrollbarWidth:p}),e.jsxs("div",r({className:"st-table-body-container",ref:w},{children:[d.length>0&&e.jsx(L,r({},t,{rows:o,templateColumns:f,pinned:"left",sectionRef:u,isRowExpanded:s,onExpandRowClick:c})),e.jsx(L,r({},t,{rows:o,templateColumns:i,sectionRef:l,isRowExpanded:s,onExpandRowClick:c})),h.length>0&&e.jsx(L,r({},t,{rows:o,templateColumns:m,pinned:"right",sectionRef:v,isRowExpanded:s,onExpandRowClick:c}))]}))},B=function(e){var n=e.event,r=e.forceUpdate,t=e.header,o=e.headersRef,a=e.index;e.reverse;var s=e.setIsWidthDragging;s(!0),n.preventDefault();var l=n.clientX;if(t){var i=t.width,c=function(e){var n=Math.max(i+(e.clientX-l),40);t&&o.current&&(o.current[a].width=n,r())},d=function(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),s(!1)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}},O=n.forwardRef((function(t,o){var a,s=t.columnResizing,l=t.currentRows,i=t.draggable,c=t.draggedHeaderRef,d=t.forceUpdate,u=t.headersRef,f=t.hoveredHeaderRef,h=t.index,v=t.onSort,g=t.onTableHeaderDragEnd,p=t.reverse,w=t.selectableColumns,R=t.setIsWidthDragging,x=t.setSelectedCells,C=t.sort,j=t.sortDownIcon,y=t.sortUpIcon,I=n.useState(!1),S=I[0],D=I[1],H=null===(a=u.current)||void 0===a?void 0:a[h],k=Boolean(null==H?void 0:H.isSortable),M="st-header-cell ".concat(H===f.current?"st-hovered":""," ").concat(S?"st-dragging":""," ").concat(k?"clickable":""," ").concat(i&&!k?"draggable":""," ").concat("right"===(null==H?void 0:H.align)?"right-aligned":""),N=E({draggedHeaderRef:c,headersRef:u,hoveredHeaderRef:f,onTableHeaderDragEnd:g}),L=N.handleDragStart,T=N.handleDragEnd,O=E({draggedHeaderRef:c,headersRef:u,hoveredHeaderRef:f,onTableHeaderDragEnd:g}).handleDragOver,A=b(),P=function(e){var n=e.event,r=e.header;if(w){var t=l.length,o=Array.from({length:t},(function(e,n){return"".concat(n,"-").concat(h)})),a=function(e,n){var r=new Set,o=Math.min(e,n),a=Math.max(e,n);return Array.from({length:t}).forEach((function(e,n){Array.from({length:a-o+1}).forEach((function(e,t){r.add("".concat(n,"-").concat(o+t))}))})),r};n.shiftKey?x((function(e){var n,r=Number(null===(n=Array.from(e)[0])||void 0===n?void 0:n.split("-")[1]),t=Number(o[0].split("-")[1]);return r===t?new Set(o):r>t?a(t,r):a(r,t)})):x(new Set(o))}else r.isSortable&&v(h,r.accessor)};if(n.useEffect((function(){var e=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"};return document.addEventListener("dragover",e),function(){document.removeEventListener("dragover",e)}}),[]),!H)return null;var W=s&&e.jsx("div",{className:"st-header-resize-handle",onMouseDown:function(e){A({callback:B,callbackProps:{event:e,forceUpdate:d,header:H,headersRef:u,index:h,setIsWidthDragging:R},limit:10})}});return e.jsxs("div",r({className:M,id:m({accessor:H.accessor,rowIndex:0}),onDragOver:function(e){A({callback:O,callbackProps:{event:e,hoveredHeader:H},limit:50})},ref:o,style:{width:H.width}},{children:[p&&W,e.jsx("div",r({className:"st-header-label",draggable:i,onClick:function(e){return P({event:e,header:H})},onDragEnd:function(e){e.preventDefault(),D(!1),T()},onDragStart:function(e){i&&H&&function(e){D(!0),L(e)}(H)},onMouseEnter:function(){return document.body.style.overflow="hidden"},onMouseLeave:function(){return document.body.style.overflow="auto"}},{children:null==H?void 0:H.label})),C&&C.key.accessor===H.accessor&&e.jsxs("div",r({className:"st-sort-icon-container",onClick:function(e){return P({event:e,header:H})}},{children:["ascending"===C.direction&&y&&y,"descending"===C.direction&&j&&j]})),!p&&W]}))})),A=function(e,r){n.useEffect((function(){if(e.current){var n=e.current,t=function(){var e,t=null==n?void 0:n.scrollLeft;void 0!==t&&(null===(e=r.current)||void 0===e||e.scrollTo(t,0))};return n.addEventListener("scroll",t),function(){null==n||n.removeEventListener("scroll",t)}}}),[e,r])},P=function(t){var o,a,s,l=t.allowAnimations,i=t.columnResizing,c=t.currentRows,d=t.draggable,u=t.draggedHeaderRef,f=t.forceUpdate,h=t.headerContainerRef,v=t.headersRef,m=t.hiddenColumns,p=t.hoveredHeaderRef,w=t.isWidthDragging,R=t.mainTemplateColumns,x=t.onSort,C=t.onTableHeaderDragEnd,b=t.pinnedLeftColumns,j=t.pinnedLeftTemplateColumns,y=t.pinnedRightColumns,E=t.pinnedRightTemplateColumns,I=t.selectableColumns,D=t.setIsWidthDragging,k=t.setSelectedCells,M=t.shouldDisplayLastColumnCell,N=t.sort,L=t.sortDownIcon,T=t.sortUpIcon,B=t.mainBodyRef,P=n.useRef(null);A(B,P);return e.jsxs("div",r({className:"st-header-container",ref:h},{children:[b.length>0&&e.jsx("div",r({className:"st-header-pinned-left",style:{gridTemplateColumns:j}},{children:e.jsx(H,r({allowAnimations:l,draggedHeaderRef:u,headersRef:v,mainBodyRef:B,pauseAnimation:w,rowIndex:0},{children:null===(o=v.current)||void 0===o?void 0:o.map((function(r,t){return g({hiddenColumns:m,header:r,pinned:"left"})?e.jsx(O,{columnResizing:i,currentRows:c,draggable:d,draggedHeaderRef:u,forceUpdate:f,headersRef:v,hoveredHeaderRef:p,index:t,onSort:x,onTableHeaderDragEnd:C,ref:n.createRef(),selectableColumns:I,setIsWidthDragging:D,setSelectedCells:k,sort:N,sortDownIcon:L,sortUpIcon:T},r.accessor):null}))}))})),e.jsx("div",r({className:"st-header-main",onScroll:function(e){var n,r,t=null===(n=P.current)||void 0===n?void 0:n.scrollLeft;void 0!==t&&(null===(r=B.current)||void 0===r||r.scrollTo(t,0))},ref:P,style:{gridTemplateColumns:R}},{children:e.jsxs(H,r({allowAnimations:l,draggedHeaderRef:u,headersRef:v,mainBodyRef:B,pauseAnimation:w,rowIndex:0},{children:[null===(a=v.current)||void 0===a?void 0:a.map((function(r,t){return g({hiddenColumns:m,header:r})?e.jsx(O,{columnResizing:i,currentRows:c,draggable:d,draggedHeaderRef:u,forceUpdate:f,headersRef:v,hoveredHeaderRef:p,index:t,onSort:x,onTableHeaderDragEnd:C,ref:n.createRef(),selectableColumns:I,setIsWidthDragging:D,setSelectedCells:k,sort:N,sortDownIcon:L,sortUpIcon:T},r.accessor):null})),e.jsx(S,{ref:n.createRef(),visible:M})]}))})),y.length>0&&e.jsx("div",r({className:"st-header-pinned-right",style:{gridTemplateColumns:E}},{children:e.jsxs(H,r({allowAnimations:l,draggedHeaderRef:u,headersRef:v,mainBodyRef:B,pauseAnimation:w,rowIndex:0},{children:[null===(s=v.current)||void 0===s?void 0:s.map((function(r,t){return g({hiddenColumns:m,header:r,pinned:"right"})?e.jsx(O,{columnResizing:i,currentRows:c,draggable:d,draggedHeaderRef:u,forceUpdate:f,headersRef:v,hoveredHeaderRef:p,index:t,onSort:x,onTableHeaderDragEnd:C,reverse:!0,ref:n.createRef(),selectableColumns:I,setIsWidthDragging:D,setSelectedCells:k,sort:N,sortDownIcon:L,sortUpIcon:T},r.accessor):null})),e.jsx(S,{ref:n.createRef(),visible:M})]}))}))]}))},W=function(t){var o=t.allowAnimations,a=t.columnResizing,s=t.currentRows,l=t.draggable,i=t.draggedHeaderRef,c=t.editColumns,d=t.forceUpdate,u=t.getBorderClass,f=t.handleMouseDown,h=t.handleMouseOver,v=t.headersRef,m=t.hiddenColumns,g=t.hoveredHeaderRef,p=t.isRowExpanded,w=t.isSelected,R=t.isTopLeftCell,x=t.isWidthDragging,C=t.mainBodyRef,b=t.onCellChange,j=t.onExpandRowClick,y=t.onSort,E=t.onTableHeaderDragEnd,I=t.pinnedLeftRef,S=t.pinnedRightRef,D=t.scrollbarHorizontalRef,H=t.scrollbarWidth,k=t.selectableColumns,M=t.setIsWidthDragging,N=t.setSelectedCells,L=t.shouldPaginate,B=t.sort,O=t.sortDownIcon,A=t.sortUpIcon,W=t.tableBodyContainerRef,z=n.useRef(null),U=v.current.filter((function(e){return!e.hide&&!e.pinned})),F=n.useMemo((function(){return!!C.current&&U.reduce((function(e,n){return e+n.width}),0)<C.current.clientWidth}),[U,C]),G=v.current.filter((function(e){return"left"===e.pinned&&!0!==e.hide})),V=v.current.filter((function(e){return"right"===e.pinned&&!0!==e.hide})),J=n.useMemo((function(){return"".concat(G.map((function(e){return"".concat(e.width,"px")})).join(" "))}),[G]),X=n.useMemo((function(){return"".concat(U.filter((function(e){return!0!==m[e.accessor]})).map((function(e){return"".concat(e.width,"px")})).join(" ")," 1fr")}),[U,m]),q=n.useMemo((function(){return"".concat(V.map((function(e){return"".concat(e.width,"px")})).join(" "))}),[V]),Y={allowAnimations:o,columnResizing:a,currentRows:s,draggable:l,draggedHeaderRef:i,forceUpdate:d,headerContainerRef:z,headersRef:v,hiddenColumns:m,hoveredHeaderRef:g,isWidthDragging:x,mainBodyRef:C,mainTemplateColumns:X,onSort:y,onTableHeaderDragEnd:E,pinnedLeftColumns:G,pinnedLeftTemplateColumns:J,pinnedRightColumns:V,pinnedRightTemplateColumns:q,selectableColumns:k,setIsWidthDragging:M,setSelectedCells:N,shouldDisplayLastColumnCell:F,sort:B,sortDownIcon:O,sortUpIcon:A,tableBodyContainerRef:W},K={allowAnimations:o,currentRows:s,draggedHeaderRef:i,getBorderClass:u,handleMouseDown:f,handleMouseOver:h,headerContainerRef:z,headers:v.current,headersRef:v,hiddenColumns:m,hoveredHeaderRef:g,isRowExpanded:p,isSelected:w,isTopLeftCell:R,isWidthDragging:x,mainBodyRef:C,mainTemplateColumns:X,onCellChange:b,onExpandRowClick:j,onTableHeaderDragEnd:E,pinnedLeftColumns:G,pinnedLeftRef:I,pinnedLeftTemplateColumns:J,pinnedRightColumns:V,pinnedRightRef:S,pinnedRightTemplateColumns:q,scrollbarHorizontalRef:D,scrollbarWidth:H,shouldDisplayLastColumnCell:F,shouldPaginate:L,tableBodyContainerRef:W};return e.jsxs("div",r({className:"st-table-content",style:{width:c?"calc(100% - 27.5px)":"100%"}},{children:[e.jsx(P,r({},Y)),e.jsx(T,r({},K))]}))},z=function(e){var r=e.callback,t=e.ref,o=e.widthAttribute;n.useEffect((function(){var e=t.current;if(e){var n=function(){r(e[o]||0)};n();var a=new ResizeObserver((function(){n()}));return a.observe(e),function(){return a.disconnect()}}}),[r,t,o])},U=function(t){t.headersRef;var o=t.mainBodyRef,a=t.pinnedLeftRef,s=t.pinnedRightRef,l=t.scrollbarHorizontalRef,i=t.tableContentWidth,c=n.useState(0),d=c[0],u=c[1],f=n.useState(0),h=f[0],v=f[1],m=n.useState(0),g=m[0],p=m[1],w=n.useRef(null);return z({widthAttribute:"offsetWidth",callback:u,ref:a}),z({widthAttribute:"scrollWidth",callback:p,ref:o}),z({widthAttribute:"offsetWidth",callback:v,ref:s}),A(o,w),!o.current||o.current.scrollWidth<=o.current.clientWidth?null:e.jsx("div",r({className:"st-horizontal-scrollbar-container",ref:l},{children:e.jsxs("div",r({style:{width:i}},{children:[d>0&&e.jsx("div",{className:"st-horizontal-scrollbar-left",style:{flexShrink:0,width:d}}),g>0&&e.jsx("div",r({className:"st-horizontal-scrollbar-middle",onScroll:function(e){var n=e.target.scrollLeft;void 0!==n&&o.current&&o.current.scrollTo({left:n,behavior:"auto"})},ref:w},{children:e.jsx("div",{style:{width:g}})})),h>0&&e.jsx("div",{className:"st-horizontal-scrollbar-right",style:{flexShrink:0,minWidth:h}})]}))}))},F=function(e,r){var t=n.useState(null),a=t[0],s=t[1],l=n.useState({}),i=l[0],c=l[1],d=n.useMemo((function(){if(!a)return e;var n=function(e,n,r){var t=r?r.key:e[0],a="ascending";return r&&r.key.accessor===t.accessor&&"ascending"===r.direction&&(a="descending"),{sortedData:o([],n,!0).sort((function(e,n){var r,o,s,l,i=null!==(o=null===(r=null==e?void 0:e.rowData)||void 0===r?void 0:r[t.accessor])&&void 0!==o?o:"",c=null!==(l=null===(s=null==n?void 0:n.rowData)||void 0===s?void 0:s[t.accessor])&&void 0!==l?l:"";return i<c?"ascending"===a?1:-1:i>c?"ascending"===a?-1:1:0})),newSortConfig:{key:t,direction:a}}}(r,e,a).sortedData;return n}),[e,a,r]);return{sort:a,setSort:s,sortedRows:d,hiddenColumns:i,setHiddenColumns:c}};!function(e){e.Left="left",e.Right="right"}(a||(a={}));var G=function(t){var o=t.allowAnimations,f=void 0!==o&&o,h=t.columnEditorPosition,m=void 0===h?a.Right:h,g=t.columnEditorText,p=void 0===g?"Columns":g,w=t.columnResizing,R=void 0!==w&&w,x=t.defaultHeaders,C=t.draggable,b=void 0!==C&&C,j=t.editColumns,y=void 0!==j&&j,E=t.editColumnsInitOpen,I=void 0!==E&&E,S=t.height,D=t.hideFooter,H=void 0!==D&&D,k=t.nextIcon,M=void 0===k?e.jsx(i,{className:"st-next-prev-icon"}):k,N=t.onCellChange,L=t.prevIcon,T=void 0===L?e.jsx(l,{className:"st-next-prev-icon"}):L,B=t.rows,O=t.rowsPerPage,A=void 0===O?10:O,P=t.selectableCells,z=void 0!==P&&P,G=t.selectableColumns,V=void 0!==G&&G,J=t.shouldPaginate,X=void 0!==J&&J,q=t.sortDownIcon,Y=void 0===q?e.jsx(u,{className:"st-sort-icon"}):q,K=t.sortUpIcon,_=void 0===K?e.jsx(d,{className:"st-sort-icon"}):K,$=t.theme,Q=void 0===$?"light":$,Z=n.useState((function(){return function(e){var n=new Set,r=function(e){var t;e.rowMeta.isExpanded&&n.add(e.rowMeta.rowId.toString()),null===(t=e.rowMeta.children)||void 0===t||t.forEach(r)};return e.forEach(r),n}(B)})),ee=Z[0],ne=Z[1],re=n.useMemo((function(){return B.map((function(e,n){return r(r({},e),{originalRowIndex:n})}))}),[B]),te=n.useRef(null),oe=n.useRef(x),ae=n.useRef(null),se=n.useRef(null),le=n.useRef(null),ie=n.useRef(null),ce=n.useRef(null),de=n.useRef(null),ue=n.useState(!1),fe=ue[0],he=ue[1],ve=n.useState(1),me=ve[0],ge=ve[1],pe=n.useState(0),we=pe[0],Re=pe[1],xe=n.useState(0),Ce=xe[0],be=xe[1],je=F(re,oe.current),ye=je.sort,Ee=je.setSort,Ie=je.sortedRows,Se=je.hiddenColumns,De=je.setHiddenColumns,He=n.useCallback((function(e){var n=String(e);ne((function(e){var r=new Set(e);return r.has(n)?r.delete(n):r.add(n),r}))}),[]),ke=n.useCallback((function(e){return ee.has(String(e))}),[ee]),Me=n.useReducer((function(e){return e+1}),0)[1],Ne=function(e){var r=e.selectableCells,t=e.headers,o=e.rows,a=n.useState(new Set),s=a[0],l=a[1],i=n.useRef(!1),c=n.useRef(null),d=n.useCallback((function(){var e=Array.from(s).reduce((function(e,n){var r=n.split("-").map(Number),a=r[0],s=r[1];return e[a]||(e[a]=[]),e[a][s]=o[a][t[s].accessor],e}),{}),n=Object.values(e).map((function(e){return Object.values(e).join("\t")})).join("\n");navigator.clipboard.writeText(n)}),[s,o,t]);n.useEffect((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"c"===e.key&&d()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[d]);var u=n.useCallback((function(e,n){return s.has("".concat(e,"-").concat(n))}),[s]),f=n.useCallback((function(e,n){var r=[];return u(e-1,n)||r.push("st-selected-top-border"),u(e+1,n)||r.push("st-selected-bottom-border"),u(e,n-1)||r.push("st-selected-left-border"),u(e,n+1)||r.push("st-selected-right-border"),r.join(" ")}),[u]),h=n.useMemo((function(){var e=Math.min.apply(Math,Array.from(s).map((function(e){return parseInt(e.split("-")[0])}))),n=Math.min.apply(Math,Array.from(s).map((function(e){return parseInt(e.split("-")[1])})));return function(r,t){return r===e&&t===n}}),[s]);return{selectedCells:s,handleMouseDown:function(e){var n=e.colIndex,t=e.rowIndex;r&&(i.current=!0,c.current={row:t,col:n},l(new Set(["".concat(t,"-").concat(n)])))},handleMouseOver:function(e,n){if(r&&i.current&&c.current){for(var t=new Set,o=Math.min(c.current.row,e),a=Math.max(c.current.row,e),s=Math.min(c.current.col,n),d=Math.max(c.current.col,n),u=o;u<=a;u++)for(var f=s;f<=d;f++)t.add("".concat(u,"-").concat(f));l(t)}},handleMouseUp:function(){i.current=!1,c.current=null},isSelected:u,getBorderClass:f,isTopLeftCell:h,setSelectedCells:l}}({selectableCells:z,headers:oe.current,rows:Ie}),Le=Ne.handleMouseDown,Te=Ne.handleMouseOver,Be=Ne.handleMouseUp,Oe=Ne.isSelected,Ae=Ne.getBorderClass,Pe=Ne.isTopLeftCell,We=Ne.setSelectedCells,ze=n.useMemo((function(){return X?Ie.slice((me-1)*A,me*A):Ie}),[me,A,X,Ie]),Ue=n.useCallback((function(e,n){Ee((function(r){return(null==r?void 0:r.key.accessor)!==n?{key:oe.current[e],direction:"ascending"}:"ascending"===(null==r?void 0:r.direction)?{key:oe.current[e],direction:"descending"}:null}))}),[Ee]),Fe=n.useCallback((function(e){oe.current=e,Me()}),[]);return n.useEffect((function(){var e=function(e){var n=e.target;n.closest(".st-cell")||V&&(n.classList.contains("st-header-cell")||n.classList.contains("st-header-label"))||We(new Set)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[V,We]),n.useLayoutEffect((function(){if(de.current){var e=de.current.offsetWidth-de.current.clientWidth,n=de.current.clientWidth;Re(e),be(n)}}),[]),e.jsx(c.Provider,r({value:{rows:B,tableRows:re}},{children:e.jsxs("div",r({className:"simple-table-root st-wrapper theme-".concat(Q),style:S?{height:S}:{}},{children:[e.jsxs("div",r({className:"st-table-wrapper-container"},{children:[e.jsxs("div",r({className:"st-table-wrapper",onMouseUp:Be,onMouseLeave:Be},{children:[e.jsx(W,{allowAnimations:f,columnResizing:R,currentRows:ze,draggable:b,draggedHeaderRef:te,editColumns:y,forceUpdate:Me,getBorderClass:Ae,handleMouseDown:Le,handleMouseOver:Te,headers:oe.current,headersRef:oe,hiddenColumns:Se,hoveredHeaderRef:ae,isRowExpanded:ke,isSelected:Oe,isTopLeftCell:Pe,isWidthDragging:fe,mainBodyRef:se,onCellChange:N,onExpandRowClick:He,onSort:Ue,onTableHeaderDragEnd:Fe,pinnedLeftRef:le,pinnedRightRef:ie,scrollbarHorizontalRef:ce,scrollbarWidth:we,selectableColumns:V,setIsWidthDragging:he,setSelectedCells:We,shouldPaginate:X,sort:ye,sortDownIcon:Y,sortUpIcon:_,tableBodyContainerRef:de}),e.jsx(v,{columnEditorText:p,editColumns:y,editColumnsInitOpen:I,headers:oe.current,hiddenColumns:Se,position:m,setHiddenColumns:De})]})),e.jsx(U,{headersRef:oe,mainBodyRef:se,pinnedLeftRef:le,pinnedRightRef:ie,scrollbarHorizontalRef:ce,tableContentWidth:Ce})]})),e.jsx(s,{currentPage:me,hideFooter:H,nextIcon:M,onPageChange:ge,prevIcon:T,rowsPerPage:A,shouldPaginate:X,totalRows:Ie.length})]}))}))};G.defaultProps={allowAnimations:!1,columnEditorPosition:a.Right,columnEditorText:"Columns",columnResizing:!1,defaultHeaders:[],draggable:!1,editColumns:!1,editColumnsInitOpen:!1,height:"",hideFooter:!1,nextIcon:e.jsx(i,{className:"st-next-prev-icon"}),onCellChange:function(){},prevIcon:e.jsx(l,{className:"st-next-prev-icon"}),rows:[],rowsPerPage:10,selectableCells:!1,selectableColumns:!1,shouldPaginate:!1,sortDownIcon:e.jsx(u,{className:"st-sort-icon"}),sortUpIcon:e.jsx(d,{className:"st-sort-icon"}),theme:"light"};var V=n.memo(G);exports.SimpleTable=V;
//# sourceMappingURL=index.js.map
